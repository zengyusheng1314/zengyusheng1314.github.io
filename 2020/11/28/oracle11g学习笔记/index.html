<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="theme-color" content="#6200ee"><meta name="author" content="曾宇哥"><meta name="copyright" content="曾宇哥"><meta name="generator" content="Hexo 5.2.0"><meta name="theme" content="hexo-theme-yun"><title>oracle11g学习笔记 | 曾宇哥的博客</title><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@900&amp;display=swap" media="print" onload="this.media='all'"><script src="//at.alicdn.com/t/font_1140697_stqaphw3j4.js" async></script><script src="https://cdn.jsdelivr.net/npm/scrollreveal/dist/scrollreveal.min.js" defer></script><script>document.addEventListener("DOMContentLoaded", () => {
  [".post-card",".post-content img"].forEach((target)=> {
    ScrollReveal().reveal(target);
  })
});
</script><link id="light-prism-css" rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.20.0/themes/prism.css" media="(prefers-color-scheme: light)"><link id="dark-prism-css" rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.20.0/themes/prism-tomorrow.css" media="(prefers-color-scheme: dark)"><link rel="shortcut icon" type="image/svg+xml" href="/zengyusheng1314.github.io/favicon.ico"><link rel="mask-icon" href="/zengyusheng1314.github.io/favicon.ico" color="#6200ee"><link rel="alternate icon" href="/yun.ico"><link rel="preload" href="/zengyusheng1314.github.io/css/hexo-theme-yun.css" as="style"><link rel="preload" href="/zengyusheng1314.github.io/js/utils.js" as="script"><link rel="preload" href="/zengyusheng1314.github.io/js/hexo-theme-yun.js" as="script"><link rel="prefetch" href="/zengyusheng1314.github.io/js/sidebar.js" as="script"><link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin><link rel="stylesheet" href="/zengyusheng1314.github.io/css/hexo-theme-yun.css"><script id="yun-config">
    const Yun = window.Yun || {};
    window.CONFIG = {"hostname":"zengyusheng1314.github.io","root":"/zengyusheng1314.github.io/","title":"曾宇哥的博客","version":"1.3.0","mode":"auto","copycode":true,"anonymous_image":"https://cdn.jsdelivr.net/gh/YunYouJun/cdn/img/avatar/none.jpg","say":{"api":"https://v1.hitokoto.cn","hitokoto":true},"fireworks":{"colors":["102, 167, 221","62, 131, 225","33, 78, 194"]}};
  </script><script src="/zengyusheng1314.github.io/h" async></script><script src="/zengyusheng1314.github.io/t" async></script><script src="/zengyusheng1314.github.io/t" async></script><script src="/zengyusheng1314.github.io/p" async></script><script src="/zengyusheng1314.github.io/s" async></script><script src="/zengyusheng1314.github.io/:" async></script><script src="/zengyusheng1314.github.io/" async></script><script src="/zengyusheng1314.github.io/" async></script><script src="/zengyusheng1314.github.io/c" async></script><script src="/zengyusheng1314.github.io/d" async></script><script src="/zengyusheng1314.github.io/n" async></script><script src="/zengyusheng1314.github.io/." async></script><script src="/zengyusheng1314.github.io/j" async></script><script src="/zengyusheng1314.github.io/s" async></script><script src="/zengyusheng1314.github.io/d" async></script><script src="/zengyusheng1314.github.io/e" async></script><script src="/zengyusheng1314.github.io/l" async></script><script src="/zengyusheng1314.github.io/i" async></script><script src="/zengyusheng1314.github.io/v" async></script><script src="/zengyusheng1314.github.io/r" async></script><script src="/zengyusheng1314.github.io/." async></script><script src="/zengyusheng1314.github.io/n" async></script><script src="/zengyusheng1314.github.io/e" async></script><script src="/zengyusheng1314.github.io/t" async></script><script src="/zengyusheng1314.github.io/" async></script><script src="/zengyusheng1314.github.io/n" async></script><script src="/zengyusheng1314.github.io/p" async></script><script src="/zengyusheng1314.github.io/m" async></script><script src="/zengyusheng1314.github.io/" async></script><script src="/zengyusheng1314.github.io/i" async></script><script src="/zengyusheng1314.github.io/o" async></script><script src="/zengyusheng1314.github.io/n" async></script><script src="/zengyusheng1314.github.io/i" async></script><script src="/zengyusheng1314.github.io/c" async></script><script src="/zengyusheng1314.github.io/o" async></script><script src="/zengyusheng1314.github.io/n" async></script><script src="/zengyusheng1314.github.io/s" async></script><script src="/zengyusheng1314.github.io/" async></script><script src="/zengyusheng1314.github.io/d" async></script><script src="/zengyusheng1314.github.io/i" async></script><script src="/zengyusheng1314.github.io/s" async></script><script src="/zengyusheng1314.github.io/t" async></script><script src="/zengyusheng1314.github.io/" async></script><script src="/zengyusheng1314.github.io/i" async></script><script src="/zengyusheng1314.github.io/o" async></script><script src="/zengyusheng1314.github.io/n" async></script><script src="/zengyusheng1314.github.io/i" async></script><script src="/zengyusheng1314.github.io/c" async></script><script src="/zengyusheng1314.github.io/o" async></script><script src="/zengyusheng1314.github.io/n" async></script><script src="/zengyusheng1314.github.io/s" async></script><script src="/zengyusheng1314.github.io/." async></script><script src="/zengyusheng1314.github.io/j" async></script><script src="/zengyusheng1314.github.io/s" async></script><script>(function(){
  var bp = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  if (curProtocol === 'https') {
    bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else {
    bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(bp, s);
})();</script><!-- Google Tag Manager --><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-M9KWR9L');</script><!-- End Google Tag Manager --><meta name="description" content="SQL语言结构化查询语言 学习方法1.学会固定语法使用 2.多进行案例的分析,以及多看表的结构  3.记住常用语法 注释--单行注释 &#x2F;* 多行 注释 *&#x2F;  注意的事项1.关键词(系统的命令,函数名称,表名,列名等其他对象名)不区分大小写,但是数据严格区分大小写。2.每一句SQL语句的后面必须加上分号结尾。3.执行SQL语句的时候,必须使用鼠标选中需要执行的行,点击执行。 用户对象 只要是和对象">
<meta property="og:type" content="article">
<meta property="og:title" content="oracle11g学习笔记">
<meta property="og:url" content="https://zengyusheng1314.github.io/zengyusheng1314.github.io/2020/11/28/oracle11g%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/index.html">
<meta property="og:site_name" content="曾宇哥的博客">
<meta property="og:description" content="SQL语言结构化查询语言 学习方法1.学会固定语法使用 2.多进行案例的分析,以及多看表的结构  3.记住常用语法 注释--单行注释 &#x2F;* 多行 注释 *&#x2F;  注意的事项1.关键词(系统的命令,函数名称,表名,列名等其他对象名)不区分大小写,但是数据严格区分大小写。2.每一句SQL语句的后面必须加上分号结尾。3.执行SQL语句的时候,必须使用鼠标选中需要执行的行,点击执行。 用户对象 只要是和对象">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2020-11-28T06:52:46.000Z">
<meta property="article:modified_time" content="2020-11-28T11:24:05.168Z">
<meta property="article:author" content="曾宇哥">
<meta property="article:tag" content="oracle11g">
<meta property="article:tag" content="SQL">
<meta name="twitter:card" content="summary"><script src="/zengyusheng1314.github.io/js/ui/mode.js"></script></head><body><script defer src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script defer src="/zengyusheng1314.github.io/js/ui/fireworks.js"></script><canvas class="fireworks"></canvas><div class="container"><a class="sidebar-toggle hty-icon-button" id="menu-btn"><div class="hamburger hamburger--spin" type="button"><span class="hamburger-box"><span class="hamburger-inner"></span></span></div></a><div class="sidebar-toggle sidebar-overlay"></div><aside class="sidebar"><script src="/zengyusheng1314.github.io/js/sidebar.js"></script><ul class="sidebar-nav"><li class="sidebar-nav-item sidebar-nav-toc hty-icon-button sidebar-nav-active" data-target="post-toc-wrap" title="文章目录"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-list-ordered"></use></svg></li><li class="sidebar-nav-item sidebar-nav-overview hty-icon-button" data-target="site-overview-wrap" title="站点概览"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-passport-line"></use></svg></li></ul><div class="sidebar-panel" id="site-overview-wrap"><div class="site-info fix-top"><a class="site-author-avatar" href="/zengyusheng1314.github.io/about/" title="曾宇哥"><img width="96" loading="lazy" src="/zengyusheng1314.github.io/images/avatar.jpg" alt="曾宇哥"></a><div class="site-author-name"><a href="/zengyusheng1314.github.io/about/">曾宇哥</a></div><a class="site-name" href="/zengyusheng1314.github.io/about/site.html">曾宇哥的博客</a><sub class="site-subtitle"></sub><div class="site-desciption">生活,编程,阅读,音乐,电影</div></div><nav class="site-state"><a class="site-state-item hty-icon-button icon-home" href="/zengyusheng1314.github.io/" title="我的主页"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-home-4-line"></use></svg></span></a><div class="site-state-item"><a href="/zengyusheng1314.github.io/archives/" title="归档"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-archive-line"></use></svg></span><span class="site-state-item-count">4</span></a></div><div class="site-state-item"><a href="/zengyusheng1314.github.io/categories/" title="分类"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-folder-2-line"></use></svg></span><span class="site-state-item-count">3</span></a></div><div class="site-state-item"><a href="/zengyusheng1314.github.io/tags/" title="标签"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="site-state-item-count">7</span></a></div><a class="site-state-item hty-icon-button" target="_blank" rel="noopener" href="https://note.youdao.com/web/#/file/recent/note/8A8658D0A20E44D3BF38AEA06890C70F/" title="文档"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-settings-line"></use></svg></span></a></nav><hr style="margin-bottom:0.5rem"><div class="links-of-author"><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://github.com/zengyusheng1314" title="GitHub" target="_blank" style="color:#181717"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-github-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="mailto:zeng.yusheng@qq.com" title="E-Mail" target="_blank" style="color:#07722"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-mail-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://music.163.com/#/user/home?id=362610007" title="网易云音乐" target="_blank" style="color:#C10D0C"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-netease-cloud-music-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://www.zhihu.com/people/ceng-yu-ge-64" title="知乎" target="_blank" style="color:#0084FF"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-zhihu-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://space.bilibili.com/384447326" title="哔哩哔哩动画" target="_blank" style="color:#FF8EB3"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-bilibili-line"></use></svg></a></div><br><a class="links-item hty-icon-button" id="toggle-mode-btn" href="javascript:;" title="Mode" style="color: #f1cb64"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-contrast-2-line"></use></svg></a></div><div class="sidebar-panel sidebar-panel-active" id="post-toc-wrap"><div class="post-toc"><div class="post-toc-content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#SQL%E8%AF%AD%E8%A8%80"><span class="toc-number">1.</span> <span class="toc-text">SQL语言</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%A6%E4%B9%A0%E6%96%B9%E6%B3%95"><span class="toc-number">1.1.</span> <span class="toc-text">学习方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B3%A8%E9%87%8A"><span class="toc-number">1.2.</span> <span class="toc-text">注释</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F%E7%9A%84%E4%BA%8B%E9%A1%B9"><span class="toc-number">1.3.</span> <span class="toc-text">注意的事项</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E5%AF%B9%E8%B1%A1"><span class="toc-number">2.</span> <span class="toc-text">用户对象</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E7%94%A8%E6%88%B7"><span class="toc-number">2.1.</span> <span class="toc-text">创建用户</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%B5%8B%E6%9D%83"><span class="toc-number">2.2.</span> <span class="toc-text">赋权</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%B6%E5%9B%9E%E6%9D%83%E9%99%90"><span class="toc-number">2.3.</span> <span class="toc-text">收回权限</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E4%BF%AE%E6%94%B9%E5%AF%86%E7%A0%81"><span class="toc-number">2.4.</span> <span class="toc-text">用户修改密码</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E9%94%81%E5%AE%9A"><span class="toc-number">2.5.</span> <span class="toc-text">用户锁定</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E8%A7%A3%E9%94%81"><span class="toc-number">2.6.</span> <span class="toc-text">用户解锁</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E7%94%A8%E6%88%B7"><span class="toc-number">2.7.</span> <span class="toc-text">删除用户</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SQL%E8%AF%AD%E8%A8%80%E5%88%86%E7%B1%BB"><span class="toc-number">3.</span> <span class="toc-text">SQL语言分类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">4.</span> <span class="toc-text">数据类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-number">5.</span> <span class="toc-text">常见运算符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%BB%E8%BE%91%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-number">6.</span> <span class="toc-text">逻辑运算符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A1%A8%E5%AF%B9%E8%B1%A1"><span class="toc-number">7.</span> <span class="toc-text">表对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B0%E5%A2%9E%E8%A1%A8"><span class="toc-number">8.</span> <span class="toc-text">新增表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%AD%E5%A4%A7%E7%BA%A6%E6%9D%9F"><span class="toc-number">9.</span> <span class="toc-text">六大约束</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A1%A8%E7%BA%A7%E5%92%8C%E5%88%97%E7%BA%A7%E7%BA%A6%E6%9D%9F"><span class="toc-number">10.</span> <span class="toc-text">表级和列级约束</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%96%E8%BE%91%E7%BA%A6%E6%9D%9F"><span class="toc-number">11.</span> <span class="toc-text">编辑约束</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E8%A1%A8%E7%BB%93%E6%9E%84"><span class="toc-number">12.</span> <span class="toc-text">修改表结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2"><span class="toc-number">13.</span> <span class="toc-text">查询</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E6%9F%A5%E8%AF%A2"><span class="toc-number">13.1.</span> <span class="toc-text">基本查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A8%A1%E7%B3%8A%E6%9F%A5%E8%AF%A2"><span class="toc-number">13.2.</span> <span class="toc-text">模糊查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8E%92%E5%BA%8F"><span class="toc-number">13.3.</span> <span class="toc-text">排序</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0"><span class="toc-number">13.4.</span> <span class="toc-text">聚合函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%86%E7%BB%84%E5%87%BD%E6%95%B0"><span class="toc-number">13.5.</span> <span class="toc-text">分组函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#wm-concat"><span class="toc-number">13.6.</span> <span class="toc-text">wm_concat</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#in-all-any"><span class="toc-number">13.7.</span> <span class="toc-text">in,all any</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-number">13.8.</span> <span class="toc-text">子查询</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%AD%90%E6%9F%A5%E8%AF%A2%E7%9A%84%E6%AD%A5%E9%AA%A4"><span class="toc-number">13.8.1.</span> <span class="toc-text">使用子查询的步骤</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8D%95%E8%A1%A8%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-number">13.8.2.</span> <span class="toc-text">单表子查询</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%A4%9A%E8%A1%A8%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-number">13.8.3.</span> <span class="toc-text">多表子查询</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2"><span class="toc-number">13.9.</span> <span class="toc-text">分页查询</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#rowid"><span class="toc-number">13.9.1.</span> <span class="toc-text">rowid</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#rownum"><span class="toc-number">13.9.2.</span> <span class="toc-text">rownum</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#rownum%E7%9A%84%E8%A7%A3%E9%A2%98%E6%80%9D%E8%B7%AF"><span class="toc-number">13.9.2.1.</span> <span class="toc-text">rownum的解题思路</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A2%9E%E5%88%A0%E6%94%B9"><span class="toc-number">14.</span> <span class="toc-text">增删改</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B0%E5%A2%9E%E6%95%B0%E6%8D%AE"><span class="toc-number">14.1.</span> <span class="toc-text">新增数据</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9B%B4%E6%96%B0%E6%95%B0%E6%8D%AE"><span class="toc-number">14.2.</span> <span class="toc-text">更新数据</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE"><span class="toc-number">14.3.</span> <span class="toc-text">删除数据</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0"><span class="toc-number">15.</span> <span class="toc-text">常用函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A1%A8%E8%BF%9E%E6%8E%A5"><span class="toc-number">16.</span> <span class="toc-text">表连接</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%86%85%E8%BF%9E%E6%8E%A5"><span class="toc-number">16.1.</span> <span class="toc-text">内连接</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B7%A6%E8%BF%9E%E6%8E%A5"><span class="toc-number">16.2.</span> <span class="toc-text">左连接</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%B3%E8%BF%9E%E6%8E%A5"><span class="toc-number">16.3.</span> <span class="toc-text">右连接</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%A8%E8%BF%9E%E6%8E%A5"><span class="toc-number">16.4.</span> <span class="toc-text">全连接</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%86%E5%9B%BE"><span class="toc-number">17.</span> <span class="toc-text">视图</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A7%86%E5%9B%BE%E7%9A%84%E4%BD%9C%E7%94%A8%EF%BC%9F"><span class="toc-number">17.1.</span> <span class="toc-text">视图的作用？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A7%86%E5%9B%BE%E7%9A%84%E7%BC%BA%E7%82%B9%EF%BC%9F"><span class="toc-number">17.2.</span> <span class="toc-text">视图的缺点？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E8%A7%86%E5%9B%BE"><span class="toc-number">17.3.</span> <span class="toc-text">创建视图</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E8%A7%86%E5%9B%BE"><span class="toc-number">17.4.</span> <span class="toc-text">删除视图</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95"><span class="toc-number">18.</span> <span class="toc-text">索引</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B"><span class="toc-number">19.</span> <span class="toc-text">存储过程</span></a></li></ol></div></div></div></aside><main class="sidebar-translate" id="content"><div id="post"><article class="post-block" itemscope itemtype="https://schema.org/Article"><link itemprop="mainEntityOfPage" href="https://zengyusheng1314.github.io/zengyusheng1314.github.io/zengyusheng1314.github.io/2020/11/28/oracle11g%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><span hidden itemprop="author" itemscope itemtype="https://schema.org/Person"><meta itemprop="name" content="曾宇哥"><meta itemprop="description"></span><span hidden itemprop="publisher" itemscope itemtype="https://schema.org/Organization"><meta itemprop="name" content="曾宇哥的博客"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">oracle11g学习笔记</h1><div class="post-meta"><div class="post-time" style="display:inline-block"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-calendar-line"></use></svg></span> <time title="创建时间：2020-11-28 14:52:46" itemprop="dateCreated datePublished" datetime="2020-11-28T14:52:46+08:00">2020-11-28</time></div><div class="post-classify"><span class="post-category"> <span class="post-meta-item-icon" style="margin-right:3px;"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-folder-line"></use></svg></span><span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a class="category" href="/zengyusheng1314.github.io/categories/Oracle/" style="--text-color:var(--hty-text-color)" itemprop="url" rel="index"><span itemprop="text">Oracle</span></a></span></span><span class="post-tag"><span class="post-meta-divider">-</span><a class="tag" href="/zengyusheng1314.github.io/tags/oracle11g/" style="--text-color:var(--hty-text-color)"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="tag-name">oracle11g</span></a><a class="tag" href="/zengyusheng1314.github.io/tags/SQL/" style="--text-color:var(--hty-text-color)"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="tag-name">SQL</span></a></span></div></div></header><section class="post-body" itemprop="articleBody"><div class="post-content markdown-body" style="--smc-primary:#6200ee;"><h3 id="SQL语言"><a href="#SQL语言" class="headerlink" title="SQL语言"></a>SQL语言</h3><p>结构化查询语言</p>
<h4 id="学习方法"><a href="#学习方法" class="headerlink" title="学习方法"></a>学习方法</h4><p>1.学会固定语法使用</p>
<p>2.多进行案例的分析,以及多看表的结构 </p>
<p>3.记住常用语法</p>
<h4 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h4><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token comment">--单行注释</span>
<span class="token comment">/*
多行
注释
*/</span></code></pre>

<h4 id="注意的事项"><a href="#注意的事项" class="headerlink" title="注意的事项"></a>注意的事项</h4><p>1.关键词(系统的命令,函数名称,表名,列名等其他对象名)不区分大小写,但是数据严格区分大小写。<br>2.每一句SQL语句的后面必须加上分号结尾。<br>3.执行SQL语句的时候,必须使用鼠标选中需要执行的行,点击执行。</p>
<h3 id="用户对象"><a href="#用户对象" class="headerlink" title="用户对象"></a>用户对象</h3><ol>
<li>只要是和对象相关的,则可以在创建的时候使用的关键字:create</li>
<li>对象的编辑:alter</li>
<li>对象的删除:drop</li>
<li>创建用户只允许使用管理员账号进行创建</li>
</ol>
<h4 id="创建用户"><a href="#创建用户" class="headerlink" title="创建用户"></a>创建用户</h4><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token comment">--语法 CREATE	user 用户名 identified by 密码；</span>
<span class="token keyword">CREATE</span> <span class="token keyword">USER</span> test2 IDENTIFIED <span class="token keyword">BY</span> <span class="token number">123456</span><span class="token punctuation">;</span></code></pre>

<h4 id="赋权"><a href="#赋权" class="headerlink" title="赋权"></a>赋权</h4><pre class="language-plsql" data-language="plsql"><code class="language-plsql"><span class="token comment">--语法:grant 权限1,权限2..... to 用户名;</span>
<span class="token comment">--connect,resource 普通用户权限</span>
<span class="token comment">--dba 管理员权限</span>
<span class="token keyword">GRANT</span> <span class="token keyword">CONNECT</span> <span class="token punctuation">,</span><span class="token keyword">resource</span> <span class="token keyword">TO</span> test2<span class="token punctuation">;</span></code></pre>

<h4 id="收回权限"><a href="#收回权限" class="headerlink" title="收回权限"></a>收回权限</h4><pre class="language-plsql" data-language="plsql"><code class="language-plsql"><span class="token comment">--语法:revoke 权限1,权限2..... from 用户名;</span>
<span class="token keyword">REVOKE</span> <span class="token keyword">CONNECT</span><span class="token punctuation">,</span><span class="token keyword">resource</span> <span class="token keyword">FROM</span> test2<span class="token punctuation">;</span></code></pre>

<h4 id="用户修改密码"><a href="#用户修改密码" class="headerlink" title="用户修改密码"></a>用户修改密码</h4><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token comment">--语法:alter user 用户名 identified by 新密码;</span>
<span class="token keyword">ALTER</span> <span class="token keyword">USER</span> test2 IDENTIFIED <span class="token keyword">BY</span> qwe123<span class="token punctuation">;</span></code></pre>

<h4 id="用户锁定"><a href="#用户锁定" class="headerlink" title="用户锁定"></a>用户锁定</h4><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token comment">--语法:alter user  用户名 account lock;</span>
<span class="token keyword">ALTER</span> <span class="token keyword">USER</span> test2 account <span class="token keyword">LOCK</span><span class="token punctuation">;</span></code></pre>

<h4 id="用户解锁"><a href="#用户解锁" class="headerlink" title="用户解锁"></a>用户解锁</h4><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token comment">--语法:alter user  用户名 account unlock;</span>
<span class="token keyword">ALTER</span> <span class="token keyword">USER</span> test2 account <span class="token keyword">unlock</span><span class="token punctuation">;</span></code></pre>

<h4 id="删除用户"><a href="#删除用户" class="headerlink" title="删除用户"></a>删除用户</h4><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token comment">--语法:drop user 用户名 cascade;</span>
<span class="token keyword">DROP</span> <span class="token keyword">USER</span> test2 <span class="token keyword">CASCADE</span><span class="token punctuation">;</span></code></pre>

<h3 id="SQL语言分类"><a href="#SQL语言分类" class="headerlink" title="SQL语言分类"></a>SQL语言分类</h3><p>DQL语言:data query language 数据查询语言<br>   select<br>DML语言:data mainpulation language 数据操纵语言<br>   insert update delete<br>DDL语言:data definition language 数据定义语言<br>   create alter drop<br>DCL语言:data control language 数据控制语言<br>   grant 授权 rollback 回滚</p>
<h3 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h3><p>number(n):数字类型,当前输入框最多输入n位,默认是整型<br>   number(5):最大填入的数字:0-99999<br>number(n,m):当前输入框能够输入的最大位数为n为,小数点往前面移动m位<br>   number(5,2):最大填入的数字:0-999.99<br>varchar2(n):字符串类型,最多输入n个英文字符,n/2个中文字符<br>   varchar2(20):最多输入0-20个英文字符,0-10个中文<br>   varchar2(21):最多输入0-21个英文字符,0-10个中文<br>char(n):不可变的长度,字符串类型<br>   char(2):必须要输入2个字符,如果没有达到2个,则用空格来进行补齐<br>date :日期类型,默认定位到的YYYY-MM-DD HH:Mi:SS<br>timestamp :时间戳,定位到世纪,毫秒<br>BloB:存储图像,声音,视频等文件,存储的最大空间为4G</p>
<h3 id="常见运算符"><a href="#常见运算符" class="headerlink" title="常见运算符"></a>常见运算符</h3><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token operator">+</span> 加
<span class="token operator">-</span> 减
<span class="token operator">*</span> 乘
<span class="token operator">/</span> 除
<span class="token operator">%</span> 取余 <span class="token number">10</span><span class="token operator">%</span><span class="token number">3</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token operator">*</span><span class="token operator">*</span> 取幂 <span class="token number">2</span><span class="token operator">*</span><span class="token operator">*</span><span class="token number">3</span><span class="token operator">=</span><span class="token number">8</span>
<span class="token operator">=</span> 等于
<span class="token operator">!=</span> 不等于 <span class="token operator">&lt;></span>不等于</code></pre>

<h3 id="逻辑运算符"><a href="#逻辑运算符" class="headerlink" title="逻辑运算符"></a>逻辑运算符</h3><p>表达式1 and 表达式2 :查询既满足表达式1和表达式2的数据内容<br>表达式1 or 表达式2:查询出满足表达式1或者满足表达式2的所有数据<br>     age&gt;=18 or age&lt;=7<br>not 表达式 :非,是表达式的相反数据结果<br>    sex=’男’   not sex=’女’  sex!=’女’</p>
<h3 id="表对象"><a href="#表对象" class="headerlink" title="表对象"></a>表对象</h3><p>表是数据库存储数据的最小单位。<br>对测试来说,一般很少会进行表的创建,创建表一般都是后台或者DBA进行管理和测试的。<br>相关的一种测试方法:字段测试(查看后台开发的表结构是否和需求一致),测试还需了解表的结构。<br>因为需要在测试执行的过程中,来进行测试数据的添加。</p>
<p>–PS:SQL语言自动过滤空格<br>–PS:列名的取名不能是用关键字<br>–PS:最后一个列的后面不需要加逗号<br>–PS:在oracle中所有的字符内容必须使用单引号引起来,数字不需要<br>–PS:oracle支持中文的表名和列名,但是不建议使用</p>
<h3 id="新增表"><a href="#新增表" class="headerlink" title="新增表"></a>新增表</h3><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token comment">--语法:create table 表名(列名 列的属性 [列的约束],列名2 列的属性 [列的约束]....);</span>
<span class="token comment">--用户信息表</span>
 <span class="token comment">--用户ID,昵称,密码,住址,联系方式,性别,出生年月,年龄,爱好</span>
 <span class="token keyword">Create</span> <span class="token keyword">Table</span> userinfo<span class="token punctuation">(</span>
 userid Varchar2<span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token keyword">Primary</span> <span class="token keyword">Key</span><span class="token punctuation">,</span>   <span class="token comment">--用户ID 主键约束</span>
 nickname Varchar2<span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">Not</span> <span class="token boolean">Null</span> <span class="token keyword">unique</span><span class="token punctuation">,</span> <span class="token comment">--昵称 非空+唯一</span>
 passwd Varchar2<span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">)</span> <span class="token operator">Not</span> <span class="token boolean">Null</span><span class="token punctuation">,</span>   <span class="token comment">--密码  非空</span>
 address Varchar2<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span> <span class="token keyword">default</span><span class="token punctuation">(</span><span class="token string">'深圳南山'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">--住址  默认</span>
 Tel Number<span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token operator">Not</span> <span class="token boolean">Null</span> <span class="token keyword">check</span><span class="token punctuation">(</span>Tel <span class="token operator">Between</span> <span class="token number">10000000000</span> <span class="token operator">And</span> <span class="token number">19999999999</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">--联系方式  非空+检查</span>
 sex <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">default</span><span class="token punctuation">(</span><span class="token string">'男'</span><span class="token punctuation">)</span> <span class="token keyword">Check</span><span class="token punctuation">(</span>sex <span class="token operator">In</span><span class="token punctuation">(</span><span class="token string">'男'</span><span class="token punctuation">,</span><span class="token string">'女'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>           <span class="token comment">--性别 默认</span>
 born <span class="token keyword">date</span><span class="token punctuation">,</span>             <span class="token comment">--出生年月</span>
 age number<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">Check</span><span class="token punctuation">(</span>age<span class="token operator">>=</span><span class="token number">18</span> <span class="token operator">And</span> age<span class="token operator">&lt;=</span><span class="token number">35</span><span class="token punctuation">)</span><span class="token punctuation">,</span>         <span class="token comment">--年龄 检查</span>
 hobbit Varchar2<span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span> <span class="token keyword">Default</span><span class="token punctuation">(</span><span class="token string">'无'</span><span class="token punctuation">)</span> <span class="token comment">--爱好  默认</span>
 <span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token keyword">Create</span> <span class="token keyword">Table</span> 商品信息<span class="token punctuation">(</span>
 商品id Number<span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span> <span class="token keyword">Primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span>
 商品名称 Varchar2<span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">Not</span> <span class="token boolean">Null</span>  <span class="token keyword">unique</span><span class="token punctuation">,</span>
 商品价格 number<span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">Not</span> <span class="token boolean">Null</span> <span class="token keyword">Check</span><span class="token punctuation">(</span>商品价格<span class="token operator">></span><span class="token number">0</span><span class="token punctuation">)</span>
 <span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token keyword">Create</span> <span class="token keyword">Table</span> TB_Order<span class="token punctuation">(</span>     <span class="token comment">--新增淘宝订单表</span>
 BuyID Varchar2<span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token keyword">References</span> userinfo<span class="token punctuation">(</span>userid<span class="token punctuation">)</span> <span class="token operator">Not</span> <span class="token boolean">null</span> <span class="token punctuation">,</span>  <span class="token comment">--用户ID</span>
 BuyName <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token operator">Not</span> <span class="token boolean">Null</span> <span class="token punctuation">,</span>        <span class="token comment">--用户名称 非空</span>
 GoodsID Number<span class="token punctuation">(</span><span class="token number">30</span> <span class="token punctuation">)</span><span class="token operator">Not</span> <span class="token boolean">Null</span> <span class="token keyword">Unique</span> <span class="token keyword">References</span> 商品信息<span class="token punctuation">(</span>商品id<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">--商品ID 非空,唯一,外键约束(商品信息表:商品ID,商品的名称,商品的价格)</span>
 goodsname Varchar2<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span> <span class="token operator">Not</span> <span class="token boolean">Null</span> <span class="token keyword">Unique</span><span class="token punctuation">,</span>     <span class="token comment">--商品名称 非空约束,唯一约束</span>
 Orderid Varchar2<span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">)</span> <span class="token keyword">Primary</span> <span class="token keyword">Key</span><span class="token punctuation">,</span>       <span class="token comment">--订单Id   主键约束</span>
 goodsnum Number<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token keyword">Default</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>  <span class="token keyword">Check</span><span class="token punctuation">(</span>goodsnum<span class="token operator">>=</span><span class="token number">1</span> <span class="token operator">And</span> goodsnum<span class="token operator">&lt;=</span><span class="token number">55555</span><span class="token punctuation">)</span> <span class="token punctuation">,</span>    <span class="token comment">--订单数量 检查1-55555 ,默认为1件</span>
 goodprice  number<span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">Not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>   <span class="token comment">--商品价格   非空</span>

 <span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>

<h3 id="六大约束"><a href="#六大约束" class="headerlink" title="六大约束"></a>六大约束</h3><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token comment">/*
Not null :非空约束
default(值) :默认约束 default('男') default(1) 
     --PS:默认约束不能和非空约束放在一起使用
     --DEFAULT的优先级最高,所以当存在多个不同约束时,必须放在所有约束之前
unique:唯一约束
check(表达式):检查约束,用来控制用户输入的内容
     check(age>=18 and age&lt;=35) 等于 check(age between 18 and 35)
     check(name=A or  name=B or name=C) 等于 check(name in(A,B,C))
primary key :主键约束
      1.每一张表只能有一个主键约束
      2.选择主键约束的列,必须是可以作为其他表的调用的列
      3.主键列自带两个约束:not null非空  unique唯一
      4.主键表的创建一定要在外检表的创建之前进行
references 主键表(主键列名) :外键约束
      1.数据全部来自于另外一张表的主键列中
      2.作为外键列的名字可以和主键列的名字不一致
      3.但是数据类型和长度限制必须一致!!!!!
      4.外键约束没有自带任何约束
*/</span>
</code></pre>

<h3 id="表级和列级约束"><a href="#表级和列级约束" class="headerlink" title="表级和列级约束"></a>表级和列级约束</h3><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token comment">--在正常的建表语句中,经常会先进行列和属性的定义,后面再把所有的相关约束放在一起进行编写</span>
<span class="token comment">--后续如果要进行约束的变更时,方便查看,就用到了表级约束</span>
<span class="token comment">--每一个约束都有自己的名字,默认是系统进行自动命名,也可以通过表级约束进行命名,方便约束的修改和删除</span>
<span class="token keyword">Create</span> <span class="token keyword">Table</span> testa<span class="token punctuation">(</span>sid number<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token keyword">Primary</span> <span class="token keyword">key</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">--列级约束</span>
<span class="token comment">--表级约束:写在列名定义之后</span>
<span class="token comment">--命名要求:主键约束:PK_表名_列名 外键:FK_主表_列名_当前列的名 检查约束:CK_表名_列名 唯一性:UQ_表名_列名</span>
<span class="token comment">--关键字:constraint 约束名 约束的类型(约束对象)</span>
<span class="token keyword">Create</span> <span class="token keyword">Table</span> testa<span class="token punctuation">(</span>sid number<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">Constraint</span> PK_testa_sid <span class="token keyword">Primary</span> <span class="token keyword">key</span><span class="token punctuation">(</span>sid<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 表级的外键约束:</span>
<span class="token comment">--Constraint 外键名 Foreign Key(当前表的列名) References 主键表名(主键列)</span>
<span class="token comment">--PS:能够被设为表级约束的:检查,外键,主键,唯一性</span>
<span class="token comment">--非空和默认不能够作为表级约束</span>

<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> classinfo<span class="token punctuation">(</span><span class="token comment">--班级信息表</span>
cid varchar2<span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment">--班级编号</span>
ctype VARCHAR2<span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token comment">--班级类型</span>
cpostation VARCHAR2<span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token comment">--班级类型</span>
stratTime <span class="token keyword">DATE</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token comment">--开班时间</span>
cstatus <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token comment">--班级状态</span>
<span class="token keyword">CONSTRAINT</span> PK_classinfo_cid <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>cid<span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token keyword">CONSTRAINT</span> CK_classinfo_ctype <span class="token keyword">CHECK</span><span class="token punctuation">(</span>ctype <span class="token operator">IN</span><span class="token punctuation">(</span><span class="token string">'UI'</span><span class="token punctuation">,</span><span class="token string">'开发'</span><span class="token punctuation">,</span><span class="token string">'测试'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token keyword">CONSTRAINT</span> CK_classinfo_cstatus <span class="token keyword">CHECK</span><span class="token punctuation">(</span>cstatus <span class="token operator">IN</span><span class="token punctuation">(</span><span class="token string">'在读'</span><span class="token punctuation">,</span><span class="token string">'毕业'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> studentinfo<span class="token punctuation">(</span><span class="token comment">--学员信息表</span>
stuno NUMBER<span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">--学号</span>
stuname VARCHAR2<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token comment">--姓名</span>
stusex <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>    <span class="token comment">--性别</span>
stuage NUMBER<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>  <span class="token comment">--年龄</span>
stutel <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token comment">--联系方式</span>
stuxueli Varchar2<span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token comment">--学历</span>
stuspac VARCHAR2<span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token comment">--专业</span>
stuschool Varchar2<span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token comment">--毕业院校</span>
stuaddress Varchar2<span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span><span class="token punctuation">(</span><span class="token string">'地址不详'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">--家庭住址</span>
stujinyan VARCHAR2<span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span><span class="token punctuation">(</span><span class="token string">'无'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment">--工作经验</span>
intime <span class="token keyword">DATE</span><span class="token punctuation">,</span> <span class="token comment">--参加培训时间</span>
class_belong varchar2<span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token comment">--所属班级</span>
<span class="token keyword">CONSTRAINT</span> PK_studentinfo_stuno <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>stuno<span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token keyword">CONSTRAINT</span> CK_studentinfo_stusex <span class="token keyword">CHECK</span><span class="token punctuation">(</span>stusex <span class="token operator">IN</span><span class="token punctuation">(</span><span class="token string">'男'</span><span class="token punctuation">,</span><span class="token string">'女'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token keyword">CONSTRAINT</span> CK_studentinfo_stuage <span class="token keyword">CHECK</span><span class="token punctuation">(</span>stuage<span class="token operator">>=</span><span class="token number">18</span> <span class="token operator">And</span> stuage<span class="token operator">&lt;=</span><span class="token number">35</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token keyword">CONSTRAINT</span> CK_studentinfo_stuxueli <span class="token keyword">CHECK</span><span class="token punctuation">(</span>stuxueli <span class="token operator">IN</span><span class="token punctuation">(</span><span class="token string">'本科'</span><span class="token punctuation">,</span><span class="token string">'专科'</span><span class="token punctuation">,</span><span class="token string">'研究生'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token keyword">CONSTRAINT</span> FK_studentinfo_class_belong <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>class_belong<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> classinfo<span class="token punctuation">(</span>cid<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>

<h3 id="编辑约束"><a href="#编辑约束" class="headerlink" title="编辑约束"></a>编辑约束</h3><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token comment">--添加约束(主键+唯一+检查+外键)</span>
<span class="token comment">--语法:alter table 表名 add constraint 约束名 约束类型(列名);</span>
<span class="token keyword">Alter</span> <span class="token keyword">Table</span> userinfo <span class="token keyword">Add</span> <span class="token keyword">Constraint</span> UQ_userinfo_tel <span class="token keyword">Unique</span><span class="token punctuation">(</span>tel<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">--添加约束(非空,默认)</span>
<span class="token comment">--语法:alter table 表名 modify 列名 not null/列名 default(值);</span>
<span class="token keyword">Alter</span> <span class="token keyword">Table</span> userinfo <span class="token keyword">Modify</span> age <span class="token operator">Not</span> <span class="token boolean">Null</span><span class="token punctuation">;</span>
<span class="token keyword">Alter</span> <span class="token keyword">Table</span> userinfo <span class="token keyword">Modify</span> age <span class="token keyword">default</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">--关闭某个约束</span>
<span class="token comment">--语法:alter table 表名 disable constraint 约束名;</span>
<span class="token keyword">Alter</span> <span class="token keyword">Table</span> userinfo <span class="token keyword">Disable</span> <span class="token keyword">Constraint</span> UQ_userinfo_tel<span class="token punctuation">;</span>
<span class="token comment">--启动某个约束</span>
<span class="token comment">--语法:alter table 表名 enable constraint 约束名;</span>
<span class="token keyword">Alter</span> <span class="token keyword">Table</span> userinfo <span class="token keyword">enable</span> <span class="token keyword">Constraint</span> UQ_userinfo_tel<span class="token punctuation">;</span>
<span class="token comment">--删除约束</span>
<span class="token comment">--语法:alter table 表名 drop constraint 约束名;</span>
<span class="token comment">--PS:即使当前存在数据,也可以删除指定的约束,默认和非空无法直接删除,必须删除列</span>
<span class="token comment">--PS:如果是要修改指定的主键/外键/检查约束时,必须把之前的约束删除,然后再新增.</span>
<span class="token keyword">Alter</span> <span class="token keyword">Table</span> userinfo <span class="token keyword">drop</span> <span class="token keyword">Constraint</span> PK_userinfo_userid<span class="token punctuation">;</span>
<span class="token comment">--取消非空约束</span>
<span class="token comment">--语法:Alter Table 表名 Modify 列名 null</span>
</code></pre>

<h3 id="修改表结构"><a href="#修改表结构" class="headerlink" title="修改表结构"></a>修改表结构</h3><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token comment">--添加列</span>
<span class="token comment">--语法:alter table 表名 add 列名 列的属性 列的约束;</span>
<span class="token comment">--PS:如果表中存在数据,则不能再添加列的时候,列的约束中不能使用非空/primary key</span>
<span class="token keyword">Alter</span> <span class="token keyword">Table</span> userinfo <span class="token keyword">Add</span> money Number<span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">Not</span> <span class="token boolean">Null</span><span class="token punctuation">;</span>
<span class="token keyword">Alter</span> <span class="token keyword">Table</span> userinfo <span class="token keyword">Add</span> <span class="token keyword">Constraint</span> pk_id <span class="token keyword">Primary</span> <span class="token keyword">Key</span><span class="token punctuation">(</span>userid<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">--删除列</span>
<span class="token comment">--语法:alter table 表名  drop column 列名;</span>
<span class="token comment">--PS:删除列为主键列时,不能直接删除,必须先将主键约束删除,然后才能删除指定的列</span>
<span class="token keyword">Alter</span> <span class="token keyword">Table</span> userinfo <span class="token keyword">Drop</span> <span class="token keyword">Column</span> userid<span class="token punctuation">;</span>

<span class="token comment">--修改列的名字</span>
<span class="token comment">--语法:alter table 表名 rename column 列名 to 新列名;</span>
<span class="token keyword">Alter</span> <span class="token keyword">Table</span> userinfo <span class="token keyword">Rename</span> <span class="token keyword">Column</span> money <span class="token keyword">To</span> SXmoney<span class="token punctuation">;</span></code></pre>

<h3 id="查询"><a href="#查询" class="headerlink" title="查询"></a>查询</h3><h4 id="基本查询"><a href="#基本查询" class="headerlink" title="基本查询"></a>基本查询</h4><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token comment">--查询骨架:</span>
<span class="token comment">/*
select 列名,列名2..... from 表名 
[where 筛选条件]                      --通过where进行数据的筛选和过滤
[group by 列名] [having 筛选条件]      --分组
[order by 列名] [ASC|DESC];            --排序
*/</span>
<span class="token comment">--oracle公司给新的使用者提供非常便捷学习的帮助文档以及适用项目,存在一个账号SCOTT账号可以</span>
<span class="token comment">--给到新使用者了解语法以及了解数据库结构和优化的案例,平常这个账号为锁定中的状态.</span>
<span class="token comment">/*
账号:scott 密码:tiger ,登录权限选择normal
账号默认为锁定状态: alter user scott account unlock;
*/</span>
<span class="token keyword">Select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span> 
<span class="token keyword">Select</span> <span class="token operator">*</span> <span class="token keyword">from</span> dept<span class="token punctuation">;</span> 
<span class="token operator">/</span><span class="token operator">*</span>
<span class="token comment">--查询列的时候,如果想要把所有的列全部展现出来,则可以使用*代替所有列,也可以一列一列的名称描述</span>
<span class="token keyword">Select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token punctuation">;</span>
<span class="token keyword">Select</span> empno<span class="token punctuation">,</span>ename<span class="token punctuation">,</span>JOB<span class="token punctuation">,</span>MGR<span class="token punctuation">,</span>hiredate<span class="token punctuation">,</span>sal<span class="token punctuation">,</span>comm<span class="token punctuation">,</span>deptno <span class="token keyword">from</span> emp e<span class="token punctuation">;</span> 
<span class="token keyword">Select</span> e<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">from</span> emp e<span class="token punctuation">;</span> 
<span class="token comment">----------表别名,列别名-----------</span>
<span class="token comment">--表别名:用户多表高级查询时使用,也方便我们书写列有帮助</span>
<span class="token comment">--列别名:将查询的结果表可以使用中文列方便相关人员查阅,在后续高级查询也有帮助</span>
<span class="token comment">--方法:列名 [as] 新的列名,表别名直接在表名后加空格即可 </span>
<span class="token comment">--PS:在一句SQL语句中,表别名不能重复,表别名一般会取首字母</span>
<span class="token comment">--查询出当前emp表中所有员工姓名以及工资</span>
<span class="token keyword">Select</span> e<span class="token punctuation">.</span>ename<span class="token punctuation">,</span>e<span class="token punctuation">.</span>sal <span class="token keyword">from</span> emp e<span class="token punctuation">;</span> 
<span class="token comment">--查询出当前emp表中所有员工姓名以及工资,显示中文列名</span>
<span class="token keyword">Select</span> e<span class="token punctuation">.</span>ename <span class="token keyword">As</span> 员工姓名<span class="token punctuation">,</span>e<span class="token punctuation">.</span>sal <span class="token keyword">As</span> 员工薪水 <span class="token keyword">from</span> emp e<span class="token punctuation">;</span> 
<span class="token keyword">Select</span> e<span class="token punctuation">.</span>ename  员工姓名<span class="token punctuation">,</span>e<span class="token punctuation">.</span>sal  员工薪水 <span class="token keyword">from</span> emp e<span class="token punctuation">;</span> 
<span class="token comment">-----------------where筛选条件-------------------</span>
<span class="token comment">--只要产生的临时表数据有减少,则大部分都是通过where来进行筛选的 </span>
<span class="token comment">--查询出[JAMES]的工资</span>
<span class="token keyword">Select</span> sal <span class="token keyword">from</span> emp e <span class="token keyword">Where</span> ename<span class="token operator">=</span><span class="token string">'JAMES'</span> <span class="token punctuation">;</span> <span class="token comment">--数据严格区分大小写</span>
<span class="token comment">--查询出[30号]部门的所有员工信息</span>
<span class="token keyword">Select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp e <span class="token keyword">Where</span> deptno<span class="token operator">=</span><span class="token number">30</span>  <span class="token punctuation">;</span>   <span class="token comment">--如果是数字,则不需要使用引号</span>
<span class="token comment">--查询出30号部门中所有销售人员的姓名以及工资</span>
<span class="token keyword">Select</span> ename 员工姓名<span class="token punctuation">,</span>sal 员工工资 <span class="token keyword">from</span> emp e <span class="token keyword">Where</span> deptno<span class="token operator">=</span><span class="token number">30</span> <span class="token operator">and</span> job<span class="token operator">=</span><span class="token string">'SALESMAN'</span><span class="token punctuation">;</span>
<span class="token comment">--查询出公司员工工资大于1000小于3000的员工信息</span>
<span class="token keyword">Select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp e <span class="token keyword">Where</span> sal<span class="token operator">></span><span class="token number">1000</span> <span class="token operator">And</span> sal<span class="token operator">&lt;</span><span class="token number">3000</span><span class="token punctuation">;</span> 
<span class="token comment">--查询出公司员工部门是20号部门,并且薪水大于1500以上的员工姓名以及薪水</span>
<span class="token keyword">Select</span> ename<span class="token punctuation">,</span>sal <span class="token keyword">from</span> emp e <span class="token keyword">Where</span> deptno<span class="token operator">=</span><span class="token number">20</span> <span class="token operator">And</span> sal<span class="token operator">></span><span class="token number">1500</span><span class="token punctuation">;</span> 
<span class="token comment">--查询出公司员工工资是1500和3000,2850的员工姓名以及所在岗位和薪水</span>
<span class="token keyword">Select</span> ename<span class="token punctuation">,</span>job<span class="token punctuation">,</span>sal <span class="token keyword">from</span> emp e <span class="token keyword">Where</span> sal<span class="token operator">=</span><span class="token number">1500</span> <span class="token operator">Or</span> sal<span class="token operator">=</span><span class="token number">2850</span> <span class="token operator">Or</span> sal<span class="token operator">=</span><span class="token number">3000</span><span class="token punctuation">;</span>
<span class="token keyword">Select</span> ename<span class="token punctuation">,</span>job<span class="token punctuation">,</span>sal <span class="token keyword">from</span> emp e <span class="token keyword">Where</span> sal <span class="token operator">In</span><span class="token punctuation">(</span><span class="token number">1500</span><span class="token punctuation">,</span><span class="token number">2850</span><span class="token punctuation">,</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token comment">--查询出工资加上奖金大于2000以上的员工姓名以及薪水</span>
<span class="token keyword">Select</span> ename 姓名 <span class="token punctuation">,</span>sal<span class="token operator">+</span>nvl<span class="token punctuation">(</span>comm<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span> 薪水  <span class="token keyword">from</span> emp e <span class="token keyword">Where</span> sal<span class="token operator">+</span>nvl<span class="token punctuation">(</span>comm<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">></span><span class="token number">2000</span><span class="token punctuation">;</span> 
<span class="token comment">--查询出没有奖金的员工姓名以及工作岗位</span>
<span class="token keyword">Select</span> ename<span class="token punctuation">,</span>job <span class="token keyword">from</span> emp e <span class="token keyword">Where</span> comm<span class="token operator">=</span><span class="token number">0</span> <span class="token operator">Or</span> comm <span class="token operator">Is</span> <span class="token boolean">null</span>  <span class="token punctuation">;</span> 
<span class="token comment">--null 空值,属于字符</span>
      <span class="token comment">--Is Null 为空的判断</span>
      <span class="token comment">--Is Not Null 不为空的判断</span>
<span class="token comment">--查询公司发奖金的员工姓名以及奖金金额</span>
<span class="token keyword">Select</span> ename<span class="token punctuation">,</span>comm <span class="token keyword">from</span> emp e <span class="token keyword">Where</span> comm<span class="token operator">></span><span class="token number">0</span><span class="token punctuation">;</span> 
<span class="token keyword">Select</span> ename<span class="token punctuation">,</span>comm <span class="token keyword">from</span> emp e <span class="token keyword">Where</span> comm <span class="token operator">Is</span> <span class="token operator">Not</span> <span class="token boolean">Null</span> <span class="token operator">And</span> comm<span class="token operator">!=</span><span class="token number">0</span><span class="token punctuation">;</span> 
<span class="token comment">--转换函数:nvl(列名,要替换的值)</span>
<span class="token comment">--查询出所有员工姓名以及员工的奖金,如果奖金为空,默认显示数据为0</span>
<span class="token keyword">Select</span>  ename<span class="token punctuation">,</span>nvl<span class="token punctuation">(</span>comm<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">from</span> emp e<span class="token punctuation">;</span> </code></pre>

<h4 id="模糊查询"><a href="#模糊查询" class="headerlink" title="模糊查询"></a>模糊查询</h4><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token comment">--% :替换N个字符 张%:查询出所有姓张的人,后面可以是0个字符,也可以是N个字符</span>
<span class="token comment">--_ :替换1个字符 张_:查询出所有姓张的人名,后面只能跟1个任意字符,下划线不包含0个字符</span>
<span class="token comment">--PS :在模糊查询中不能直接使用=.把等于号换成like</span>
<span class="token comment">--查询出公司员工姓名以J开头的员工姓名以及薪水</span>
<span class="token keyword">Select</span> ename<span class="token punctuation">,</span>sal <span class="token keyword">from</span> emp e <span class="token keyword">Where</span> ename <span class="token operator">Like</span> <span class="token string">'J%'</span><span class="token punctuation">;</span> 
<span class="token comment">--查询出公司姓名以S开头,T结尾的员工姓名</span>
<span class="token keyword">Select</span> ename <span class="token keyword">from</span> emp e <span class="token keyword">Where</span> ename <span class="token operator">Like</span> <span class="token string">'S%T'</span><span class="token punctuation">;</span> 
<span class="token comment">--查询出公司以D结尾的员工姓名</span>
<span class="token keyword">Select</span> ename <span class="token keyword">from</span> emp e <span class="token keyword">Where</span> ename <span class="token operator">Like</span> <span class="token string">'%D'</span><span class="token punctuation">;</span>
<span class="token comment">--查询出公司姓名包含M的员工姓名</span>
<span class="token keyword">Select</span> ename <span class="token keyword">from</span> emp e <span class="token keyword">Where</span> ename <span class="token operator">Like</span> <span class="token string">'%M%'</span><span class="token punctuation">;</span>
<span class="token comment">--查询出公司姓名第三个字母为A的员工姓名</span>
<span class="token keyword">Select</span> ename <span class="token keyword">from</span> emp e <span class="token keyword">Where</span> ename <span class="token operator">Like</span> <span class="token string">'__A%'</span><span class="token punctuation">;</span>
<span class="token comment">--查询出公司姓名只有5个字符的员工姓名</span>
<span class="token keyword">Select</span> ename <span class="token keyword">from</span> emp e <span class="token keyword">Where</span> ename <span class="token operator">Like</span> <span class="token string">'_____'</span><span class="token punctuation">;</span>
<span class="token comment">--length(列名) 统计长度</span>
<span class="token keyword">Select</span> ename <span class="token keyword">from</span> emp e <span class="token keyword">Where</span> length<span class="token punctuation">(</span>ename<span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">;</span></code></pre>

<h4 id="排序"><a href="#排序" class="headerlink" title="排序"></a>排序</h4><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token comment">--PS:where 永远是跟在from表名的后面,order by是在最后才进行排序</span>
<span class="token comment">--关键字:order by 列名 asc|desc,列名 asc|desc ...  :按照指定列进行降序/升序,如果排序之后,有数据相同的,则按照列名进行升序/降序排序</span>
<span class="token comment">--排序的方法: asc  升序(默认的排序方式,可以省略)|desc  降序</span>
<span class="token comment">--按照工资的降序进行排序</span>
<span class="token keyword">Select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp e <span class="token keyword">Order</span> <span class="token keyword">By</span> sal <span class="token keyword">desc</span><span class="token punctuation">;</span> 
<span class="token comment">--按照员工的所在的部门编号进行升序排序</span>
<span class="token keyword">Select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp e <span class="token keyword">Order</span> <span class="token keyword">By</span> deptno <span class="token keyword">asc</span><span class="token punctuation">;</span> 
<span class="token keyword">Select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp e <span class="token keyword">Order</span> <span class="token keyword">By</span> deptno <span class="token punctuation">;</span>
<span class="token comment">--按照员工的所在的部门编号进行升序排序,在部门中按照薪水进行降序排序</span>
<span class="token keyword">Select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp e <span class="token keyword">Order</span> <span class="token keyword">By</span> deptno <span class="token keyword">asc</span><span class="token punctuation">,</span>sal <span class="token keyword">desc</span><span class="token punctuation">;</span> 
<span class="token comment">--按照员工的所在的部门编号进行升序排序,在部门中按照薪水进行降序排序,如果薪水一致,则按照员工的员工编号进行升序排序</span>
<span class="token keyword">Select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp e <span class="token keyword">Order</span> <span class="token keyword">By</span> deptno <span class="token keyword">asc</span><span class="token punctuation">,</span>sal <span class="token keyword">desc</span><span class="token punctuation">,</span>empno <span class="token keyword">asc</span><span class="token punctuation">;</span> 
<span class="token comment">--查询出30号部门所有员工姓名以及薪水,并且按照薪水的降序排序</span>
<span class="token keyword">Select</span> ename<span class="token punctuation">,</span>sal <span class="token keyword">from</span> emp e <span class="token keyword">Where</span> deptno<span class="token operator">=</span><span class="token number">30</span> <span class="token keyword">Order</span> <span class="token keyword">By</span> sal <span class="token keyword">Desc</span><span class="token punctuation">;</span> 
<span class="token comment">--查询出工资高于1500以上,并且所在部门为30号部门的所有员工,按照员工编号进行升序排序</span>
<span class="token keyword">Select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp e <span class="token keyword">Where</span> sal<span class="token operator">></span><span class="token number">1500</span> <span class="token operator">And</span> deptno<span class="token operator">=</span><span class="token number">30</span> <span class="token keyword">Order</span> <span class="token keyword">By</span> empno<span class="token punctuation">;</span>
<span class="token comment">--查询出在job为销售以及分析师的员工信息,按照薪水进行降序排序,如果薪水一致,</span>
<span class="token comment">--按照所在的部门进行升序排序,如果所在部门一致,按照员工入职时间进行降序排序</span>
<span class="token keyword">Select</span> <span class="token operator">*</span>
  <span class="token keyword">From</span> Emp e
 <span class="token keyword">Where</span> Job <span class="token operator">In</span> <span class="token punctuation">(</span><span class="token string">'SALESMAN'</span><span class="token punctuation">,</span> <span class="token string">'ANALYST'</span><span class="token punctuation">)</span>
 <span class="token keyword">Order</span> <span class="token keyword">By</span> Sal <span class="token keyword">Desc</span><span class="token punctuation">,</span> Deptno<span class="token punctuation">,</span> Hiredate <span class="token keyword">Desc</span><span class="token punctuation">;</span></code></pre>

<h4 id="聚合函数"><a href="#聚合函数" class="headerlink" title="聚合函数"></a>聚合函数</h4><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token comment">--主要用来针对数据列的统计使用.经常会在软件种很多统计类的需求.</span>
<span class="token comment">--聚合函数查询的结果一般都建议进行别名,方便查看</span>
<span class="token comment">/*
sum(列):求和
max(列):当前列的最大值
min(列):最小值
avg(列):平均值
count(列):统计行数
 count()选择的列一般都会选择主键列,不会选择其他可以允许为空的列
*/</span>
<span class="token comment">--查看当前emp表中工资最高,最低,平均工资,工资支出,员工人数</span>
<span class="token keyword">Select</span> <span class="token function">Max</span><span class="token punctuation">(</span>Sal<span class="token punctuation">)</span> 最高工资<span class="token punctuation">,</span>
       <span class="token function">Min</span><span class="token punctuation">(</span>Sal<span class="token punctuation">)</span> 最低工资<span class="token punctuation">,</span>
       <span class="token function">Avg</span><span class="token punctuation">(</span>Sal<span class="token punctuation">)</span> 平均工资<span class="token punctuation">,</span>
       <span class="token function">Sum</span><span class="token punctuation">(</span>Sal<span class="token punctuation">)</span> 工资总额<span class="token punctuation">,</span>
       <span class="token function">Count</span><span class="token punctuation">(</span>Sal<span class="token punctuation">)</span> 员工人数
  <span class="token keyword">From</span> Emp e<span class="token punctuation">;</span>
<span class="token comment">--查出公司当月总支出</span>
<span class="token comment">--PS:聚合函数可以自动过滤空行,除了count()</span>
<span class="token keyword">Select</span> <span class="token function">Sum</span><span class="token punctuation">(</span>comm<span class="token punctuation">)</span><span class="token operator">+</span><span class="token function">Sum</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> 总支出 <span class="token keyword">from</span> emp e<span class="token punctuation">;</span>
<span class="token keyword">Select</span> <span class="token function">Sum</span><span class="token punctuation">(</span>nvl<span class="token punctuation">(</span>comm<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">+</span>sal<span class="token punctuation">)</span> 总支出 <span class="token keyword">from</span> emp e<span class="token punctuation">;</span>
<span class="token comment">--查询出公司有多少个员工</span>
<span class="token keyword">Select</span> <span class="token function">count</span><span class="token punctuation">(</span>mgr<span class="token punctuation">)</span> <span class="token keyword">from</span> emp e<span class="token punctuation">;</span> 
<span class="token comment">--PS:不建议在使用count函数时,选择其他列,或者直接使用count(*),可以统计当前表中的所有行</span>
<span class="token comment">-------Select ename, max(sal)from emp e;  </span>
<span class="token comment">--PS:不能将聚合函数和普通列的查询放在同一个查询语句的列中</span></code></pre>

<h4 id="分组函数"><a href="#分组函数" class="headerlink" title="分组函数"></a>分组函数</h4><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token comment">--骨架:select 列名 from 表名 where 筛选条件 group by 列名 having 筛选条件 order by列名 desc|Asc;</span>
<span class="token comment">--分组的原理:将表中的数据,指定的列,按照数据的一致性进行分组</span>
<span class="token comment">--分组函数的作用:</span>
<span class="token comment">--1.去重的作用,可以将当前列中重复的数据进行去除</span>
<span class="token comment">--2.可以结合聚合函数进行不同小组数据的统计</span>
<span class="token comment">--PS:不能选择有唯一性约束的列进行分组</span>
<span class="token comment">--PS:只要用上了group by ,则不再允许在列名位置使用* ,只能使用聚合函数或者分组的列名</span>

<span class="token comment">--查询emp表中有哪些工作岗位</span>
<span class="token keyword">Select</span> job <span class="token keyword">from</span> emp e <span class="token keyword">Group</span> <span class="token keyword">By</span> job<span class="token punctuation">;</span> 
<span class="token comment">--查询出emp表中有哪些工位,分别人数是多少</span>
<span class="token keyword">Select</span> job 岗位<span class="token punctuation">,</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span>人数 <span class="token keyword">from</span> emp e <span class="token keyword">Group</span> <span class="token keyword">By</span> job<span class="token punctuation">;</span> 
<span class="token comment">--查询出emp表中[每个]部门的最高工资,最低工资,以及平均工资,人数统计</span>
<span class="token keyword">Select</span> Deptno 部门编号<span class="token punctuation">,</span>
       <span class="token function">Max</span><span class="token punctuation">(</span>Sal<span class="token punctuation">)</span> 最高工资<span class="token punctuation">,</span>
       <span class="token function">Min</span><span class="token punctuation">(</span>Sal<span class="token punctuation">)</span> 最低工资<span class="token punctuation">,</span>
       <span class="token function">Avg</span><span class="token punctuation">(</span>Sal<span class="token punctuation">)</span> 平均工资<span class="token punctuation">,</span>
       <span class="token function">Count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> 人数
  <span class="token keyword">From</span> Emp e
 <span class="token keyword">Group</span> <span class="token keyword">By</span> Deptno<span class="token punctuation">;</span>
 
 <span class="token comment">--distinct 列名和group by 列名的区别</span>
 <span class="token comment">--都有去重的作用,但是ditinct仅仅只有去重的作用,没有产生临时表,不能进行其他的相关操作(统计)</span>
 <span class="token comment">--group by有产生临时表,可以进行聚合函数的使用,并且效率更高,并且group by 的查询性能优于distinct</span>
 <span class="token keyword">Select</span> <span class="token keyword">Distinct</span><span class="token punctuation">(</span>deptno<span class="token punctuation">)</span><span class="token keyword">from</span> emp e<span class="token punctuation">;</span> 
 <span class="token keyword">Select</span> deptno <span class="token keyword">from</span> emp e <span class="token keyword">Group</span> <span class="token keyword">By</span> deptno<span class="token punctuation">;</span>
 
<span class="token comment">-------------分组+having 筛选---------------</span>
<span class="token comment">--where 和having的用法:</span>
<span class="token comment">--1.where的筛选条件中是绝对不能直接使用聚合函数!</span>
<span class="token comment">--2.having和group by 一起捆绑使用,而且having后面主要是使用聚合函数</span>
<span class="token comment">--3.where永远会在having之前进行</span>
<span class="token comment">--统计[各个部门的]所有员工总数,并且显示最高工资,平均工资</span>
<span class="token keyword">Select</span> deptno<span class="token punctuation">,</span><span class="token function">max</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token keyword">from</span> emp e <span class="token keyword">Group</span> <span class="token keyword">By</span> deptno <span class="token punctuation">;</span> 
<span class="token comment">--统计[各个部门的]所有员工总数,并且显示最高工资,平均工资,只显示平均工资高于2000以上的岗位</span>
<span class="token keyword">Select</span> deptno<span class="token punctuation">,</span><span class="token function">max</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">avg</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">from</span> emp e  <span class="token keyword">Group</span> <span class="token keyword">By</span> deptno <span class="token keyword">Having</span> <span class="token function">avg</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span><span class="token operator">></span><span class="token number">2000</span> <span class="token punctuation">;</span> 
<span class="token comment">--统计各个部门工资高于2000以上的员工人数,并且只显示部门人数大于3人以上的部门编号以及人数</span>
<span class="token keyword">Select</span> deptno <span class="token punctuation">,</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">from</span> emp e <span class="token keyword">Where</span> sal<span class="token operator">></span><span class="token number">1000</span> <span class="token keyword">Group</span> <span class="token keyword">By</span> deptno  <span class="token keyword">Having</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">></span><span class="token number">3</span><span class="token punctuation">;</span> </code></pre>

<h4 id="wm-concat"><a href="#wm-concat" class="headerlink" title="wm_concat"></a>wm_concat</h4><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token comment">--wm_concat(列名)+group by 列名:分组的时候,将指定的列的数据放在一个表格中存储</span>
<span class="token comment">--wm_concat(列名):数据连接函数</span>
<span class="token comment">--查询出每个部门的所有员工姓名</span>
<span class="token keyword">Select</span> deptno<span class="token punctuation">,</span>wm_concat<span class="token punctuation">(</span>ename<span class="token punctuation">)</span> 员工姓名 <span class="token keyword">from</span> emp e <span class="token keyword">Group</span> <span class="token keyword">By</span> deptno<span class="token punctuation">;</span> 
<span class="token comment">--查看出每个部门的所有员工工资</span>
<span class="token keyword">Select</span> deptno<span class="token punctuation">,</span>wm_concat<span class="token punctuation">(</span>sal<span class="token punctuation">)</span> 员工姓名 <span class="token keyword">from</span> emp e <span class="token keyword">Group</span> <span class="token keyword">By</span> deptno<span class="token punctuation">;</span> 
<span class="token comment">--|| 拼接符号  </span>
<span class="token keyword">Select</span> deptno<span class="token punctuation">,</span>wm_concat<span class="token punctuation">(</span>ename <span class="token operator">||</span> <span class="token string">':'</span> <span class="token operator">||</span> sal<span class="token punctuation">)</span>  <span class="token keyword">from</span> emp e <span class="token keyword">Group</span> <span class="token keyword">By</span> deptno<span class="token punctuation">;</span> 

<span class="token comment">--打印出一句话:XX的工资是XX,工作为XX岗位</span>
<span class="token keyword">Select</span> Ename <span class="token operator">||</span> <span class="token string">'的工资是:'</span> <span class="token operator">||</span> Sal <span class="token operator">||</span> <span class="token string">',工作为:'</span> <span class="token operator">||</span> Job <span class="token operator">||</span> <span class="token string">'岗位.'</span> 员工信息
  <span class="token keyword">From</span> Emp e
 <span class="token keyword">Where</span> e<span class="token punctuation">.</span>Ename <span class="token operator">=</span> <span class="token string">'JAMES'</span><span class="token punctuation">;</span></code></pre>

<h4 id="in-all-any"><a href="#in-all-any" class="headerlink" title="in,all any"></a>in,all any</h4><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token comment">--常用的一些查询关键字</span>
<span class="token comment">--in(条件1,条件2...):同or的用法,会将满足条件1,条件2...等数据全部查询出来</span>
<span class="token comment">--not in (条件1,条件2)..是前面in的使用的相反值</span>
<span class="token comment">--------any的用法-----------</span>
<span class="token comment">--=any(条件1,条件2....):作用和in以及or的用法一模一样</span>
<span class="token comment">--查询工资等于1800,3000,1250的员工信息</span>
<span class="token keyword">Select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp e <span class="token keyword">Where</span> sal<span class="token operator">=</span><span class="token number">1800</span> <span class="token operator">Or</span> sal<span class="token operator">=</span><span class="token number">3000</span> <span class="token operator">Or</span> sal<span class="token operator">=</span><span class="token number">1250</span><span class="token punctuation">;</span> 
<span class="token keyword">Select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp e <span class="token keyword">Where</span> sal <span class="token operator">In</span><span class="token punctuation">(</span><span class="token number">1800</span><span class="token punctuation">,</span><span class="token number">3000</span><span class="token punctuation">,</span><span class="token number">1250</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">Select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp e <span class="token keyword">Where</span> sal <span class="token operator">=</span><span class="token keyword">Any</span><span class="token punctuation">(</span><span class="token number">1800</span><span class="token punctuation">,</span><span class="token number">3000</span><span class="token punctuation">,</span><span class="token number">1250</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">--&lt;any(条件1,条件2..)：小于最大值</span>
<span class="token keyword">Select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp e <span class="token keyword">Where</span> sal <span class="token operator">&lt;</span><span class="token keyword">Any</span><span class="token punctuation">(</span><span class="token number">1800</span><span class="token punctuation">,</span><span class="token number">3000</span><span class="token punctuation">,</span><span class="token number">1250</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-->any(条件1,条件2..)：大于最小值</span>
<span class="token keyword">Select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp e <span class="token keyword">Where</span> sal <span class="token operator">></span><span class="token keyword">Any</span><span class="token punctuation">(</span><span class="token number">1800</span><span class="token punctuation">,</span><span class="token number">3000</span><span class="token punctuation">,</span><span class="token number">1250</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">--=all:无法找到这样的数据</span>
<span class="token keyword">Select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp e <span class="token keyword">Where</span> sal <span class="token operator">=</span><span class="token keyword">all</span><span class="token punctuation">(</span><span class="token number">1800</span><span class="token punctuation">,</span><span class="token number">3000</span><span class="token punctuation">,</span><span class="token number">1250</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-->all:大于最大值</span>
<span class="token keyword">Select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp e <span class="token keyword">Where</span> sal <span class="token operator">></span><span class="token keyword">all</span><span class="token punctuation">(</span><span class="token number">1800</span><span class="token punctuation">,</span><span class="token number">3000</span><span class="token punctuation">,</span><span class="token number">1250</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">--&lt;all:小于最小值</span>
<span class="token keyword">Select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp e <span class="token keyword">Where</span> sal <span class="token operator">&lt;</span><span class="token keyword">all</span><span class="token punctuation">(</span><span class="token number">1800</span><span class="token punctuation">,</span><span class="token number">3000</span><span class="token punctuation">,</span><span class="token number">1250</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>

<h4 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h4><p>查询产生的临时表可以作为查询条件或者一张新表进行使用</p>
<h5 id="使用子查询的步骤"><a href="#使用子查询的步骤" class="headerlink" title="使用子查询的步骤"></a>使用子查询的步骤</h5><ol>
<li>找到当前表中的关联字段（如果是跨表则找主键和外键，如果是单表，找关联信息的线索）</li>
</ol>
<h5 id="单表子查询"><a href="#单表子查询" class="headerlink" title="单表子查询"></a>单表子查询</h5><p>查询比SCOOT 工资更高的员工姓名以及薪水</p>
<pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span>  ename<span class="token punctuation">,</span>sal <span class="token keyword">FROM</span> emp e <span class="token keyword">WHERE</span> sal <span class="token operator">></span><span class="token punctuation">(</span><span class="token keyword">SELECT</span> sal <span class="token keyword">FROM</span>  emp <span class="token keyword">WHERE</span> ENAME <span class="token operator">=</span><span class="token string">'SCOTT'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>

<p>查询出比30号部门薪水更高的的员工信息</p>
<pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> emp <span class="token keyword">WHERE</span> sal <span class="token operator">></span><span class="token keyword">ALL</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> SAL <span class="token keyword">FROM</span> EMP <span class="token keyword">WHERE</span> DEPTNO<span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>

<p><code>PS：如果子查询的结果不止一个，就必须使用in,any,all的方式进行查询</code></p>
<p>查询出比30号部门平均要高,并且比JONES还要高的员工姓名以及薪水</p>
<pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> ename<span class="token punctuation">,</span>sal <span class="token keyword">FROM</span> emp <span class="token keyword">WHERE</span> SAL <span class="token operator">></span><span class="token keyword">all</span><span class="token punctuation">(</span>
<span class="token punctuation">(</span><span class="token keyword">SELECT</span> <span class="token function">avg</span><span class="token punctuation">(</span>SAL<span class="token punctuation">)</span> <span class="token keyword">FROM</span> emp <span class="token keyword">WHERE</span> DEPTNO<span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token keyword">SELECT</span> SAL <span class="token keyword">FROM</span> emp <span class="token keyword">WHERE</span> ENAME <span class="token operator">=</span><span class="token string">'JONES'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>

<h5 id="多表子查询"><a href="#多表子查询" class="headerlink" title="多表子查询"></a>多表子查询</h5><p>数据跨表</p>
<p>查询出JAMES的上班地点</p>
<pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> loc <span class="token keyword">FROM</span> DEPT d  <span class="token keyword">WHERE</span> DEPTNO <span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">SELECT</span> DEPTNO <span class="token keyword">FROM</span> EMP e2 <span class="token keyword">WHERE</span> ename<span class="token operator">=</span><span class="token string">'JAMES'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>

<p>查询出比SALES部门的所有员工信息</p>
<pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> EMP e2 <span class="token keyword">WHERE</span> DEPTNO <span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">SELECT</span> DEPTNO <span class="token keyword">FROM</span> DEPT d2 <span class="token keyword">WHERE</span> DNAME<span class="token operator">=</span><span class="token string">'SALES'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>

<p>查询出比SALES部门工资还要高的员工信息</p>
<pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> EMP e <span class="token keyword">WHERE</span> SAL <span class="token operator">></span><span class="token keyword">ALL</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> SAL <span class="token keyword">FROM</span> EMP e2 <span class="token keyword">WHERE</span> DEPTNO<span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">SELECT</span> DEPTNO <span class="token keyword">FROM</span> DEPT d2 <span class="token keyword">WHERE</span> DNAME<span class="token operator">=</span><span class="token string">'SALES'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>

<p>查询出在CHICAGO上班的员工总数</p>
<pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> EMP e <span class="token keyword">WHERE</span> DEPTNO <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> DEPTNO <span class="token keyword">FROM</span> DEPT d2 <span class="token keyword">WHERE</span> loc<span class="token operator">=</span><span class="token string">'CHICAGO'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>

<p>查询出在CHICAGO上班并且工资高于2500以上的员工信息</p>
<pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> EMP <span class="token keyword">WHERE</span> DEPTNO <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> DEPTNO <span class="token keyword">FROM</span> DEPT d2 <span class="token keyword">WHERE</span> loc<span class="token operator">=</span><span class="token string">'CHICAGO'</span><span class="token punctuation">)</span> <span class="token operator">AND</span> sal<span class="token operator">></span><span class="token number">2500</span><span class="token punctuation">;</span></code></pre>

<h4 id="分页查询"><a href="#分页查询" class="headerlink" title="分页查询"></a>分页查询</h4><h5 id="rowid"><a href="#rowid" class="headerlink" title="rowid"></a>rowid</h5><p>真实存在的地址，当前行数据存放的真实的物理地址</p>
<pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> e<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">,</span>rowid <span class="token keyword">FROM</span> emp e<span class="token punctuation">;</span></code></pre>

<p>查询名称为SOCTT的员工信息</p>
<pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span>  EMP e  <span class="token keyword">WHERE</span> ROWID<span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> rowid <span class="token keyword">FROM</span> EMP e <span class="token keyword">WHERE</span> e<span class="token punctuation">.</span>ENAME <span class="token operator">=</span><span class="token string">'SCOTT'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>

<h5 id="rownum"><a href="#rownum" class="headerlink" title="rownum"></a>rownum</h5><p> 伪列:不存在的编号,每一张表都有一个伪列，临时表也存在，而且每一张表，伪列数字永远从1开始</p>
<h6 id="rownum的解题思路"><a href="#rownum的解题思路" class="headerlink" title="rownum的解题思路"></a>rownum的解题思路</h6><p> 1.如果是要查询当前表中前几行的数据,则可以直接使用:列名&lt;=行数<br> 2.如果想要查询中间几行的数据<br>           A.先把rownum列加入到原表中<br>           B.为了区分和后面临时表中的rownum,则必须将原表中的rownum起一个别名<br>  3.在分页查询中增加了排序<br>            1.如果只是查询前几行的数据,则先用子查询的方式进行排序,直接使用rownum&lt;=行数,即可查询结果<br>            2.查询中间几行数据的时候:<br>                  A.先做一个子查询,进行排序<br>                  B.在已经排好序的表中增加rownum并且取别名<br>                  C.从当前已经排好序,并且包含rownum列的临时表中,进行查询指定的区间数据即可     </p>
<p>查询出emp表中前5行的数据</p>
<pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">Select</span> <span class="token operator">*</span> <span class="token keyword">From</span> emp e  <span class="token keyword">Where</span> Rownum<span class="token operator">&lt;=</span><span class="token number">5</span></code></pre>

<p>查询出emp表中3-10行数据</p>
<pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> e<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">,</span>rownum r <span class="token keyword">FROM</span> EMP e<span class="token punctuation">)</span> <span class="token keyword">WHERE</span> r<span class="token operator">>=</span><span class="token number">3</span> <span class="token operator">AND</span> r<span class="token operator">&lt;=</span><span class="token number">10</span><span class="token punctuation">;</span></code></pre>

<p>查询出工资最高的三位员工信息</p>
<pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> EMP e <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> sal <span class="token keyword">DESC</span><span class="token punctuation">)</span> <span class="token keyword">WHERE</span> rownum<span class="token operator">&lt;=</span><span class="token number">3</span><span class="token punctuation">;</span></code></pre>

<p>查询出工资排在第3-6的员工信息</p>
<pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> e<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">,</span>rownum r <span class="token keyword">FROM</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> EMP <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> sal <span class="token keyword">DESC</span>）e<span class="token punctuation">)</span> <span class="token keyword">WHERE</span> r<span class="token operator">>=</span><span class="token number">3</span> <span class="token operator">AND</span> r<span class="token operator">&lt;=</span><span class="token number">6</span><span class="token punctuation">;</span></code></pre>

<h3 id="增删改"><a href="#增删改" class="headerlink" title="增删改"></a>增删改</h3><h4 id="新增数据"><a href="#新增数据" class="headerlink" title="新增数据"></a>新增数据</h4><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token comment">--语法:insert into 表名 values(值,值2);</span>
<span class="token comment">--对数据库进行数据的新增,编辑和删除,都必须使用事务语句:</span>
<span class="token comment">--commit; 提交(不是一句sql语句一格commit,可以将所有的数据全部添加成功之后,再进行一次commit即可)</span>
<span class="token comment">--rollback;回滚</span>
<span class="token comment">/*
1如果表名后没有增加指定的列,则值必须和表中的字段数量保持一致
2列名可以切换位置,但是后面values对应的值也必须和前面的列名保持一致
3指定某些列进行数据传入的时候,必须一定要选择非空的列在其中
4.插入的数据一定要结合当前需求中的实际约束来进行数据的提供
*/</span>
<span class="token keyword">Insert</span> <span class="token keyword">Into</span> userinfo <span class="token keyword">Values</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">,</span><span class="token string">'胡歌'</span><span class="token punctuation">,</span><span class="token number">19</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">Insert</span> <span class="token keyword">Into</span> userinfo<span class="token punctuation">(</span>sid<span class="token punctuation">,</span>sname<span class="token punctuation">,</span>sage<span class="token punctuation">)</span> <span class="token keyword">Values</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">,</span><span class="token string">'刘德华'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">--报错,没有足够多的值</span>
<span class="token keyword">Insert</span> <span class="token keyword">Into</span> userinfo<span class="token punctuation">(</span>sname<span class="token punctuation">,</span>sid<span class="token punctuation">,</span>sage<span class="token punctuation">)</span> <span class="token keyword">Values</span><span class="token punctuation">(</span><span class="token string">'刘德华'</span><span class="token punctuation">,</span><span class="token number">1234</span><span class="token punctuation">,</span><span class="token number">23</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">--传入空值时</span>
<span class="token comment">--PS:插入数据到指定的列中,如果想要传入的数据为空,可以在insert 语句中使用关键字null</span>
<span class="token comment">--千万不能不填!!</span>
<span class="token keyword">Insert</span> <span class="token keyword">Into</span> userinfo <span class="token keyword">Values</span><span class="token punctuation">(</span><span class="token number">1245</span><span class="token punctuation">,</span><span class="token string">'刘亦菲'</span><span class="token punctuation">,</span><span class="token number">19</span><span class="token punctuation">,</span><span class="token boolean">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">--传入时间类型</span>
<span class="token comment">--PS:时间是一段字符串,所以必须使用单引号引起来</span>
<span class="token comment">--月份必须使用大写的缩写,前三个字母</span>
<span class="token keyword">Insert</span> <span class="token keyword">Into</span> userinfo <span class="token keyword">Values</span><span class="token punctuation">(</span><span class="token number">12456</span><span class="token punctuation">,</span><span class="token string">'黄渤'</span><span class="token punctuation">,</span><span class="token number">19</span><span class="token punctuation">,</span><span class="token number">13333333333</span><span class="token punctuation">,</span><span class="token string">'26-JAN-2020'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">--使用to_date('时间数据','时间的格式'):格式必须和传入的数据类型保持一致</span>
<span class="token comment">--YYYY-MM-DD HH:mi:ss :默认的是12H制</span>
<span class="token comment">--YYYY-MM-DD HH24:mi:ss :指定24H制度</span>
<span class="token keyword">Insert</span> <span class="token keyword">Into</span> Userinfo
<span class="token keyword">Values</span>
  <span class="token punctuation">(</span><span class="token number">124567</span><span class="token punctuation">,</span>
   <span class="token string">'王宝强'</span><span class="token punctuation">,</span>
   <span class="token number">19</span><span class="token punctuation">,</span>
   <span class="token number">13333333336</span><span class="token punctuation">,</span>
   To_Date<span class="token punctuation">(</span><span class="token string">'2020-10-26 14:49:20'</span><span class="token punctuation">,</span> <span class="token string">'YYYY-MM-DD HH24:Mi:SS'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/*
January 一月
February 二月
march 三月
April 四月
may 五月
june 六月
july 七月
August 八月
septemper 九月
October 十月
november 十一月
December 十二月
*/</span>
<span class="token comment">--插入外键数据时,必须使用的数据是主键中存在的数据</span>
<span class="token keyword">Insert</span> <span class="token keyword">Into</span> userorder <span class="token keyword">Values</span><span class="token punctuation">(</span><span class="token string">'8888'</span><span class="token punctuation">,</span><span class="token number">8838888</span><span class="token punctuation">,</span><span class="token string">'飞机'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">Commit</span><span class="token punctuation">;</span>

<span class="token comment">--插入几条数据</span>
<span class="token comment">--emp表中插入一条数据</span>
<span class="token keyword">Select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp e<span class="token punctuation">;</span></code></pre>

<h4 id="更新数据"><a href="#更新数据" class="headerlink" title="更新数据"></a>更新数据</h4><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token comment">--语法:update 表名 set 列=新的值 [where 筛选条件];</span>
<span class="token comment">--PS:如果不加where,会导致当前列的所有数据全部更新</span>
<span class="token comment">--PS:修改的时候,需要注意表的结构,不能修改成唯一性的数据</span>
<span class="token comment">--也得在语句的后面使用commit进行提交</span>
<span class="token keyword">Update</span> userinfo <span class="token keyword">Set</span> sage<span class="token operator">=</span><span class="token number">30</span> <span class="token keyword">Where</span> sname<span class="token operator">=</span><span class="token string">'刘德华'</span><span class="token punctuation">;</span>
<span class="token comment">--把年龄低于20岁的信息,每个人增加2岁,高于25岁的人员年龄较少1岁</span>
<span class="token comment">--A=1:把1赋予A这个变量  </span>
<span class="token comment">--A=A+1:把A+1的结果赋予变量A(新的变量)</span>
<span class="token keyword">Update</span> userinfo <span class="token keyword">Set</span> sage<span class="token operator">=</span>sage<span class="token operator">+</span><span class="token number">2</span> <span class="token keyword">Where</span> sage<span class="token operator">&lt;</span><span class="token number">20</span><span class="token punctuation">;</span>
<span class="token keyword">Update</span> userinfo <span class="token keyword">Set</span> sage<span class="token operator">=</span>sage<span class="token operator">-</span><span class="token number">1</span> <span class="token keyword">Where</span> sage<span class="token operator">></span><span class="token number">25</span><span class="token punctuation">;</span>
<span class="token comment">--在研发语言中存在A+=1自增,但是oracle 不存在</span></code></pre>

<h4 id="删除数据"><a href="#删除数据" class="headerlink" title="删除数据"></a>删除数据</h4><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token comment">--语法:delete from 表名 [筛选条件];</span>
<span class="token comment">--PS:一定要记得加上where筛选条件!!!</span>
<span class="token comment">--PS:如果存在主键的数据正在被外键进行调用,则必须将外键的数据删除之后,才能删除成功</span>
<span class="token comment">--delete from 表名:删除表中所有数据</span>
<span class="token keyword">Delete</span> <span class="token keyword">From</span> userinfo<span class="token punctuation">;</span>
<span class="token keyword">Select</span> <span class="token operator">*</span> <span class="token keyword">From</span> userinfo e<span class="token punctuation">;</span>
<span class="token keyword">Select</span> <span class="token operator">*</span> <span class="token keyword">from</span> Userorder<span class="token punctuation">;</span>
<span class="token comment">--删除电话号码为空的用户信息</span>
<span class="token keyword">Delete</span> <span class="token keyword">from</span> userinfo <span class="token keyword">Where</span> tel <span class="token operator">Is</span> <span class="token boolean">Null</span><span class="token punctuation">;</span>
<span class="token comment">--清空表</span>
<span class="token comment">--truncate table 表名 cascade; 清空表数据</span>
<span class="token comment">--存在主键被其他表调用时,不能使用truncate进行清空</span>
<span class="token keyword">Truncate</span> <span class="token keyword">Table</span> userorder <span class="token punctuation">;</span>

<span class="token comment">--将emp表中工资低于1000以下的员工奖金增加200</span>
<span class="token keyword">Update</span> emp <span class="token keyword">Set</span> comm<span class="token operator">=</span>nvl<span class="token punctuation">(</span>comm<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">200</span> <span class="token keyword">Where</span> sal<span class="token operator">&lt;</span><span class="token number">1000</span><span class="token punctuation">;</span> 

<span class="token comment">--将10号部门的所有员工薪水上涨10%;</span>
<span class="token keyword">Update</span> emp <span class="token keyword">Set</span> sal<span class="token operator">=</span>sal<span class="token operator">*</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">+</span><span class="token number">10</span><span class="token operator">%</span><span class="token punctuation">)</span> <span class="token keyword">Where</span> deptno<span class="token operator">=</span><span class="token number">10</span>
 
<span class="token comment">--删除30号部门中工资高于6000以上的员工信息</span>
<span class="token keyword">Delete</span> emp <span class="token keyword">Where</span> sal<span class="token operator">></span><span class="token number">6000</span> <span class="token operator">And</span> deptno<span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">;</span></code></pre>

<h3 id="常用函数"><a href="#常用函数" class="headerlink" title="常用函数"></a>常用函数</h3><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token comment">--dual:临时表,不能存储数据的一张表,可以将结果暂时存放在dual表中,只能用于查询存放</span>
<span class="token keyword">Select</span> sysdate <span class="token keyword">from</span> dual<span class="token punctuation">;</span> 
<span class="token comment">--sysdate:系统时间</span>

<span class="token comment">------------------to_date ,to_number ,to_char 转换函数---------------</span>
<span class="token comment">--to_date('时间','格式'):把字符串转换成时间,一般用于数据的插入</span>
<span class="token keyword">Select</span> to_date<span class="token punctuation">(</span>Sysdate<span class="token punctuation">,</span><span class="token string">'DD-MM-YY'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span> 
<span class="token keyword">Select</span> to_date<span class="token punctuation">(</span>Sysdate<span class="token punctuation">,</span><span class="token string">'DD/MM/YY'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span>
<span class="token keyword">Select</span> to_date<span class="token punctuation">(</span>Sysdate<span class="token punctuation">,</span><span class="token string">'DD.MM.YY'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span> 
<span class="token keyword">Select</span> to_date<span class="token punctuation">(</span><span class="token string">'2020-10-28 10:13:23'</span><span class="token punctuation">,</span><span class="token string">'YYYY-MM-DD HH:Mi:SS'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span>  
<span class="token keyword">Select</span> to_date<span class="token punctuation">(</span><span class="token string">'2020-10-28 10:13:23'</span><span class="token punctuation">,</span><span class="token string">'YYYY-MM-DD HH24:Mi:SS'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span> 
<span class="token comment">--to_char(时间列):把时间类型转换成数字</span>
<span class="token comment">--主要用于数据连接时,将时间类型和字符串类型进行拼接时使用</span>
<span class="token comment">--打印一句话:scott的入职日期为XX</span>
<span class="token keyword">Select</span> ename <span class="token operator">||</span><span class="token string">'的入职日期是:'</span><span class="token operator">||</span> to_char<span class="token punctuation">(</span>e<span class="token punctuation">.</span>hiredate<span class="token punctuation">)</span> <span class="token keyword">from</span> emp e <span class="token keyword">Where</span> e<span class="token punctuation">.</span>ename<span class="token operator">=</span><span class="token string">'SCOTT'</span><span class="token punctuation">;</span> 
<span class="token comment">--to_number():如果想要把时间格式转换成数字,必须先在中间转换成字符串类型</span>
<span class="token comment">--to_date提取需要用到的时间数据,然后用to_char将时间数据转换成字符串,在后面的转换格式中,要去掉符号,否则无法转成数字</span>
<span class="token comment">--,最终to_number转换成数字</span>
<span class="token keyword">Select</span> to_number<span class="token punctuation">(</span>to_char<span class="token punctuation">(</span>to_date<span class="token punctuation">(</span><span class="token string">'2020-10-28 14:23:33'</span><span class="token punctuation">,</span><span class="token string">'YYYY-MM-DD hh24:mi:ss'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'YYYYMMDDHHMISS'</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token keyword">from</span> dual<span class="token punctuation">;</span>

<span class="token comment">------------------------时间处理函数-------</span>
<span class="token comment">--查询在1981/06/09入职的员工</span>
<span class="token keyword">Select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp e <span class="token keyword">Where</span> e<span class="token punctuation">.</span>hiredate<span class="token operator">=</span>to_date<span class="token punctuation">(</span><span class="token string">'1981/06/09'</span><span class="token punctuation">,</span><span class="token string">'YYYY-MM-DD'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">--查看SCOTT入职公司多久了</span>
<span class="token keyword">Select</span> floor<span class="token punctuation">(</span>Sysdate<span class="token operator">-</span>hiredate<span class="token punctuation">)</span> <span class="token keyword">from</span> emp e <span class="token keyword">Where</span> ename<span class="token operator">=</span><span class="token string">'SCOTT'</span><span class="token punctuation">;</span>
<span class="token keyword">Select</span> Sysdate<span class="token operator">-</span>hiredate <span class="token keyword">from</span> emp e <span class="token keyword">Where</span> ename<span class="token operator">=</span><span class="token string">'SCOTT'</span><span class="token punctuation">;</span>
<span class="token comment">--可以使用日期直接减去整数的数字,作用是减掉指定的天数</span>
<span class="token keyword">Select</span> sysdate<span class="token operator">-</span><span class="token number">1</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span> 
<span class="token keyword">Select</span> sysdate<span class="token operator">+</span><span class="token number">1</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span> 


<span class="token comment">--查看SCOTT用户和JAMES的入职日期相差多少天,向下取整</span>
<span class="token keyword">Select</span> floor<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">Select</span> Hiredate <span class="token keyword">From</span> Emp <span class="token keyword">Where</span> Ename <span class="token operator">=</span> <span class="token string">'SCOTT'</span><span class="token punctuation">)</span> <span class="token operator">-</span>
       <span class="token punctuation">(</span><span class="token keyword">Select</span> Hiredate <span class="token keyword">From</span> Emp <span class="token keyword">Where</span> Ename <span class="token operator">=</span> <span class="token string">'JAMES'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> 入职日期相差多少天
  <span class="token keyword">From</span> dual<span class="token punctuation">;</span>
 
<span class="token comment">--months_between():计算两个时间之间的月份差</span>
<span class="token keyword">Select</span> months_between<span class="token punctuation">(</span>Sysdate<span class="token punctuation">,</span>hiredate<span class="token punctuation">)</span> <span class="token keyword">from</span> emp e <span class="token keyword">Where</span> ename<span class="token operator">=</span><span class="token string">'SCOTT'</span><span class="token punctuation">;</span>
<span class="token comment">--add_months:往一个指定的时间加上指定的月份:只能加上整月的数据</span>
<span class="token keyword">Select</span> add_months<span class="token punctuation">(</span>hiredate<span class="token punctuation">,</span><span class="token number">402</span><span class="token punctuation">)</span> <span class="token keyword">from</span> emp e <span class="token keyword">Where</span> ename<span class="token operator">=</span><span class="token string">'SCOTT'</span><span class="token punctuation">;</span>
<span class="token comment">--next_day():当前系统时间的下一星期N的时间</span>
<span class="token keyword">Select</span> next_day<span class="token punctuation">(</span>to_date<span class="token punctuation">(</span><span class="token string">'2020-10-24'</span><span class="token punctuation">,</span><span class="token string">'YYYY-MM-DD'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">)</span> <span class="token keyword">From</span> dual<span class="token punctuation">;</span> 
<span class="token comment">--查询和scott在同一周的员工信息</span>
<span class="token comment">--last_day():当前月份的最后一天</span>
<span class="token keyword">Select</span> last_day<span class="token punctuation">(</span>sysdate<span class="token punctuation">)</span> <span class="token keyword">From</span> dual<span class="token punctuation">;</span> 

<span class="token comment">---------------------数据的处理函数-----------</span>
<span class="token comment">--floor:向下取整,不会四舍五入</span>
<span class="token keyword">Select</span> floor<span class="token punctuation">(</span><span class="token number">99.99</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span>
<span class="token comment">--ceil:向上取整,只要有数据,都会取整</span>
<span class="token keyword">Select</span> ceil<span class="token punctuation">(</span><span class="token number">88.2</span><span class="token punctuation">)</span> <span class="token keyword">From</span> dual<span class="token punctuation">;</span>
<span class="token comment">--mod:取模(取余)</span>
<span class="token keyword">Select</span> <span class="token function">mod</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span><span class="token comment">--余数为4</span>
<span class="token comment">--round():四舍五入</span>
<span class="token keyword">Select</span> <span class="token function">round</span><span class="token punctuation">(</span><span class="token number">88.8</span><span class="token punctuation">)</span> <span class="token keyword">From</span> dual<span class="token punctuation">;</span>
<span class="token comment">--trunc():截断</span>
<span class="token comment">--month:截断为当月的第一天</span>
<span class="token comment">--year:当年的第一天</span>
<span class="token comment">--day:当周的第一天</span>
<span class="token keyword">Select</span> trunc<span class="token punctuation">(</span>sysdate<span class="token punctuation">,</span><span class="token string">'year'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span> 

<span class="token comment">-------------字符处理函数---------------</span>
<span class="token comment">--upper():将查询的结果大写字母显示</span>
<span class="token keyword">Select</span> upper<span class="token punctuation">(</span><span class="token string">'helloworld'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span> 
<span class="token comment">--lower():将指定的字符内容小写显示</span>
<span class="token keyword">Select</span> lower<span class="token punctuation">(</span>ename<span class="token punctuation">)</span> <span class="token keyword">from</span> emp e<span class="token punctuation">;</span> 
<span class="token comment">--initcap():首字母大写</span>
<span class="token keyword">Select</span> initcap<span class="token punctuation">(</span>ename<span class="token punctuation">)</span> <span class="token keyword">from</span> emp e<span class="token punctuation">;</span> 
<span class="token comment">--concat(A,B):将A和B进行连接,只能允许两个</span>
<span class="token keyword">Select</span> concat<span class="token punctuation">(</span>ename<span class="token punctuation">,</span>sal<span class="token punctuation">)</span> <span class="token keyword">from</span> emp e<span class="token punctuation">;</span> 
<span class="token comment">--substr(字符串,n,m):截取当前传入的字符内容,n代表要截取的位置,m代表要截取到的长度</span>
<span class="token keyword">Select</span> substr<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">Select</span> ename <span class="token keyword">From</span> emp <span class="token keyword">Where</span> sal<span class="token operator">=</span><span class="token number">5000</span> <span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span> 
<span class="token comment">--length():统计字符长度</span>
<span class="token keyword">Select</span> length<span class="token punctuation">(</span><span class="token string">'helloworld'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span> 
<span class="token keyword">Select</span> ename<span class="token punctuation">,</span>length<span class="token punctuation">(</span>ename<span class="token punctuation">)</span> <span class="token keyword">from</span> emp e<span class="token punctuation">;</span> 
<span class="token comment">--lpad():指定字符长度,如果不够长度,则用* 或者#进行替换</span>
<span class="token keyword">Select</span> lpad<span class="token punctuation">(</span>ename<span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token string">'*'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> emp e<span class="token punctuation">;</span> 
<span class="token keyword">Select</span> lpad<span class="token punctuation">(</span>ename<span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token string">'#'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> emp e<span class="token punctuation">;</span> 
<span class="token comment">--trim:将指定的字符内容删除,只能针对一个字符</span>
<span class="token keyword">Select</span> Trim<span class="token punctuation">(</span><span class="token string">'B'</span><span class="token keyword">From</span> ename<span class="token punctuation">)</span> <span class="token keyword">from</span> emp e<span class="token punctuation">;</span> 
<span class="token comment">--replace():将指定的字符替换成其他字符</span>
<span class="token keyword">Select</span> <span class="token keyword">replace</span><span class="token punctuation">(</span>ename<span class="token punctuation">,</span>ename<span class="token punctuation">,</span><span class="token string">'*******'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> emp e<span class="token punctuation">;</span> </code></pre>

<h3 id="表连接"><a href="#表连接" class="headerlink" title="表连接"></a>表连接</h3><p>将多张表通过一个共同的字段（一般会选择主键或外键）连接在一起。</p>
<h4 id="内连接"><a href="#内连接" class="headerlink" title="内连接"></a>内连接</h4><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> A <span class="token keyword">inner</span> <span class="token keyword">join</span> B <span class="token keyword">on</span> A<span class="token punctuation">.</span>字段<span class="token operator">=</span>B<span class="token punctuation">.</span>字段；
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> A<span class="token punctuation">,</span>B <span class="token keyword">where</span> A<span class="token punctuation">.</span>字段<span class="token operator">=</span>B<span class="token punctuation">.</span>字段<span class="token punctuation">;</span></code></pre>

<h4 id="左连接"><a href="#左连接" class="headerlink" title="左连接"></a>左连接</h4><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> A <span class="token keyword">left</span> <span class="token keyword">join</span> B <span class="token keyword">on</span> A<span class="token punctuation">.</span>字段<span class="token operator">=</span>B<span class="token punctuation">.</span>字段；
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> A<span class="token punctuation">,</span>B <span class="token keyword">where</span> A<span class="token punctuation">.</span>字段<span class="token operator">=</span>B<span class="token punctuation">.</span>字段<span class="token punctuation">(</span><span class="token operator">+</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>

<h4 id="右连接"><a href="#右连接" class="headerlink" title="右连接"></a>右连接</h4><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> A <span class="token keyword">right</span> <span class="token keyword">join</span> B <span class="token keyword">on</span> A<span class="token punctuation">.</span>字段<span class="token operator">=</span>B<span class="token punctuation">.</span>字段；
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> A<span class="token punctuation">,</span>B <span class="token keyword">where</span> A<span class="token punctuation">.</span>字段<span class="token punctuation">(</span><span class="token operator">+</span><span class="token punctuation">)</span><span class="token operator">=</span>B<span class="token punctuation">.</span>字段<span class="token punctuation">;</span></code></pre>

<h4 id="全连接"><a href="#全连接" class="headerlink" title="全连接"></a>全连接</h4><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> A <span class="token keyword">full</span> <span class="token keyword">join</span> B <span class="token keyword">on</span> A<span class="token punctuation">.</span>字段<span class="token operator">=</span>B<span class="token punctuation">.</span>字段；</code></pre>

<h3 id="视图"><a href="#视图" class="headerlink" title="视图"></a>视图</h3><p>视图是一张临时表</p>
<h4 id="视图的作用？"><a href="#视图的作用？" class="headerlink" title="视图的作用？"></a>视图的作用？</h4><p>1.可以将比较复杂，而且将使用频率比较高的查询语句做成一个个的视图，方便进行使用</p>
<p>2.权限管理，通过视图创建一些只有指定权限才能看到的数据</p>
<h4 id="视图的缺点？"><a href="#视图的缺点？" class="headerlink" title="视图的缺点？"></a>视图的缺点？</h4><p>占用空间，消耗内存</p>
<h4 id="创建视图"><a href="#创建视图" class="headerlink" title="创建视图"></a>创建视图</h4><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token comment">--创建视图不是所有用户都有权限:</span>
<span class="token keyword">Grant</span> <span class="token keyword">Create</span> <span class="token keyword">Any</span> <span class="token keyword">View</span> <span class="token keyword">To</span> scott<span class="token punctuation">;</span>
<span class="token keyword">create</span> <span class="token operator">or</span> <span class="token keyword">replace</span> <span class="token keyword">view</span> 视图名 <span class="token comment"># 取名vw_表名</span>
<span class="token keyword">as</span>
主体语句<span class="token punctuation">;</span>（查询语句）
<span class="token keyword">with</span> <span class="token keyword">read</span> only<span class="token punctuation">;</span> <span class="token comment">#只读</span>
CRANT <span class="token keyword">CREATE</span> <span class="token keyword">ANY</span> <span class="token keyword">VIEW</span> <span class="token keyword">TO</span> 用户名<span class="token punctuation">;</span> <span class="token comment">#给用户添加创建视图权限</span></code></pre>

<h4 id="删除视图"><a href="#删除视图" class="headerlink" title="删除视图"></a>删除视图</h4><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">DROP</span> <span class="token keyword">VIEW</span> 视图名；</code></pre>

<p>PS:如果基表中数据产生变化，则视图的执行结果也会产生变化</p>
<h3 id="索引"><a href="#索引" class="headerlink" title="索引"></a>索引</h3><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token comment">--索引的作用?</span>
<span class="token comment">--用来做数据库查询优化的.索引是oracle自行维护的,如果列变动了,则索引自动失效</span>
<span class="token comment">--我们只需要决定是否需要添加索引</span>
<span class="token comment">--索引的原理:</span>
<span class="token comment">--类似数本中的目录,不需要从整张表的数,一行一行的去进行筛选,而是通过目录的方式进行缩小范围性搜索</span>
<span class="token comment">/*
语法:create index 索引名 on 表名(列名);
其中,主键列自带索引,order by 列名,distinct(group by) 列名也会增加索引
*/</span>
<span class="token comment">--单一索引:真针对单个列</span>
<span class="token keyword">Create</span> <span class="token keyword">Index</span> idx_emp_sal <span class="token keyword">On</span> emp<span class="token punctuation">(</span>sal<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">--组合索引:如果where查询语句中涉及多个列的时候,则可以使用组合索引</span>
<span class="token keyword">Create</span> <span class="token keyword">Index</span> idx_emp_empsal <span class="token keyword">On</span> emp<span class="token punctuation">(</span>empno<span class="token punctuation">,</span>sal<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">--创建带有函数的索引</span>
<span class="token keyword">Create</span> <span class="token keyword">Index</span> idx_emp_lename <span class="token keyword">On</span> emp<span class="token punctuation">(</span>lower<span class="token punctuation">(</span>ename<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">--创建一个工资总额的索引--聚合函数不能作为索引</span>
<span class="token keyword">Create</span> <span class="token keyword">Index</span> idx_emp_sumsal <span class="token keyword">On</span> emp<span class="token punctuation">(</span><span class="token function">sum</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">--修改列名之后,索引会失效,不会自动同步,需要手动进行重建</span>
<span class="token keyword">Alter</span> <span class="token keyword">Table</span> emp <span class="token keyword">Rename</span> <span class="token keyword">Column</span> sal <span class="token keyword">To</span> newsal<span class="token punctuation">;</span>
<span class="token comment">--重构索引(当列名产生变更时)</span>
<span class="token comment">--语法:alter index 索引名 rebuild;</span>
<span class="token keyword">Alter</span> <span class="token keyword">Index</span> idx_emp_sal Rebuild<span class="token punctuation">;</span>
<span class="token comment">--删除索引</span>
<span class="token comment">--语法:drop index 索引名;</span>
<span class="token keyword">Drop</span> <span class="token keyword">Index</span> idx_emp_sal<span class="token punctuation">;</span></code></pre>

<h3 id="存储过程"><a href="#存储过程" class="headerlink" title="存储过程"></a>存储过程</h3><pre class="language-sql" data-language="sql"><code class="language-sql"><span class="token comment">--PLSQL语言:可以批量执行一批达到指定目的的SQL语句</span>
<span class="token comment">--存储过程和代码里面的函数一样,需要被调用的时候,才会被执行</span>
<span class="token comment">--测试为什么要使用存储过程?</span>
<span class="token comment">--批量新增数据</span>
<span class="token comment">/*
语法:
create or replace procedure 名字(参数 参数的类型,....)
as
begin
       主体SQL语句
end;
调用存储过程:
begin
名字(参数);
end;
*/</span>
<span class="token comment">--创建</span>
<span class="token keyword">Create</span> <span class="token operator">Or</span> <span class="token keyword">Replace</span> <span class="token keyword">Procedure</span> proc_testa_Insert
<span class="token keyword">As</span>
<span class="token keyword">Begin</span>
       <span class="token keyword">Insert</span> <span class="token keyword">Into</span> testa <span class="token keyword">Values</span><span class="token punctuation">(</span><span class="token number">88</span><span class="token punctuation">,</span><span class="token string">'test'</span><span class="token punctuation">,</span><span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token keyword">Commit</span><span class="token punctuation">;</span>
<span class="token keyword">End</span><span class="token punctuation">;</span>
<span class="token comment">--调用</span>
<span class="token keyword">Begin</span>
       proc_testa_Insert<span class="token punctuation">;</span>
<span class="token keyword">End</span><span class="token punctuation">;</span>
<span class="token comment">--------------批量增加数据-------------</span>
<span class="token keyword">Create</span> <span class="token operator">Or</span> <span class="token keyword">Replace</span> <span class="token keyword">Procedure</span> proc_testa_Insert
<span class="token keyword">As</span>
<span class="token keyword">Begin</span>
     <span class="token keyword">For</span> i <span class="token operator">In</span> <span class="token number">1.</span><span class="token number">.1000</span>  <span class="token comment">--在1-1000中间,进行取值,把取到的每一个值,赋予i这个变量</span>
          <span class="token keyword">Loop</span>
          <span class="token comment">--dbms_output.put_line('今天天气真好!!');--打印的语句</span>
          <span class="token keyword">Insert</span> <span class="token keyword">Into</span> testa <span class="token keyword">Values</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span><span class="token string">'test'</span><span class="token operator">||</span> i<span class="token punctuation">,</span><span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">End</span> <span class="token keyword">Loop</span><span class="token punctuation">;</span>
       <span class="token keyword">Commit</span><span class="token punctuation">;</span>  <span class="token comment">--最好是写在循环之后,只要添加指定的数据之后,只需要执行一次commit即可,减少性能消耗</span>
<span class="token keyword">End</span><span class="token punctuation">;</span>

<span class="token keyword">Delete</span> <span class="token keyword">From</span> testa
<span class="token keyword">Select</span> <span class="token operator">*</span> <span class="token keyword">from</span> testa e<span class="token punctuation">;</span> </code></pre>

</div><div id="reward-container"><span class="hty-icon-button button-glow" id="reward-button" title="打赏" onclick="var qr = document.getElementById(&quot;qr&quot;); qr.style.display = (qr.style.display === &quot;none&quot;) ? &quot;block&quot; : &quot;none&quot;;"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-hand-coin-line"></use></svg></span><div id="reward-comment">I'm so cute. Please give me money.</div><div id="qr" style="display:none;"><div style="display:inline-block"><a target="_blank" rel="noopener" href="https://oss-zeng.oss-cn-beijing.aliyuncs.com/images/zfb.png"><img loading="lazy" src="https://oss-zeng.oss-cn-beijing.aliyuncs.com/images/zfb.png" alt="支付宝" title="支付宝"></a><div><span style="color:#00A3EE"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-alipay-line"></use></svg></span></div></div><div style="display:inline-block"><a target="_blank" rel="noopener" href="https://oss-zeng.oss-cn-beijing.aliyuncs.com/images/qq.png"><img loading="lazy" src="https://oss-zeng.oss-cn-beijing.aliyuncs.com/images/qq.png" alt="QQ 支付" title="QQ 支付"></a><div><span style="color:#12B7F5"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-qq-line"></use></svg></span></div></div><div style="display:inline-block"><a target="_blank" rel="noopener" href="https://oss-zeng.oss-cn-beijing.aliyuncs.com/images/wx.png"><img loading="lazy" src="https://oss-zeng.oss-cn-beijing.aliyuncs.com/images/wx.png" alt="微信支付" title="微信支付"></a><div><span style="color:#2DC100"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-wechat-pay-line"></use></svg></span></div></div></div></div><ul class="post-copyright"><li class="post-copyright-author"><strong>本文作者：</strong>曾宇哥</li><li class="post-copyright-link"><strong>本文链接：</strong><a href="https://zengyusheng1314.github.io/zengyusheng1314.github.io/2020/11/28/oracle11g%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" title="oracle11g学习笔记">https://zengyusheng1314.github.io/zengyusheng1314.github.io/2020/11/28/oracle11g%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</a></li><li class="post-copyright-license"><strong>版权声明：</strong>本博客所有文章除特别声明外，均默认采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener" title="CC BY-NC-SA 4.0 "><svg class="icon"><use xlink:href="#icon-creative-commons-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-by-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-nc-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-sa-line"></use></svg></a> 许可协议。</li></ul></section></article><div class="post-nav"><div class="post-nav-item"><a class="post-nav-prev" href="/zengyusheng1314.github.io/2020/11/28/%E6%88%91%E4%BB%8E%E6%9C%AA%E8%A7%81%E8%BF%87%E6%87%92%E6%83%B0%E7%9A%84%E4%BA%BA/" rel="prev" title="我从未见过懒惰的人"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-left-s-line"></use></svg><span class="post-nav-text">我从未见过懒惰的人</span></a></div><div class="post-nav-item"><a class="post-nav-next" href="/zengyusheng1314.github.io/2020/11/27/linux%E5%91%BD%E4%BB%A4/" rel="next" title="Redhat 5.4 linux命令"><span class="post-nav-text">Redhat 5.4 linux命令</span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-right-s-line"></use></svg></a></div></div></div><div id="comment"><div class="comment-tooltip text-center"><span>点击按钮跳转 GitHub Issues 评论。</span><br><span>若没有本文 Issue，您可以使用 Comment 模版新建。</span><br><a class="hty-button hty-button--raised" id="github-issues" target="_blank" rel="noopener" href="https://github.com/YunYouJun/yunyoujun.github.io/issues?q=is:issue+oracle11g学习笔记">GitHub Issues</a></div></div></main><footer class="sidebar-translate" id="footer"><div class="copyright"><span>&copy; 2019 – 2020 </span><span class="with-love" id="animate"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-cloud-line"></use></svg></span><span class="author"> 曾宇哥</span></div><div class="live_time"><span>本博客已萌萌哒地运行</span><span id="display_live_time"></span><span class="moe-text">(●'◡'●)</span><script>function blog_live_time() {
  window.setTimeout(blog_live_time, 1000);
  const start = new Date('2020-11-26T00:00:00');
  const now = new Date();
  const timeDiff = (now.getTime() - start.getTime());
  const msPerMinute = 60 * 1000;
  const msPerHour = 60 * msPerMinute;
  const msPerDay = 24 * msPerHour;
  const passDay = Math.floor(timeDiff / msPerDay);
  const passHour = Math.floor((timeDiff % msPerDay) / 60 / 60 / 1000);
  const passMinute = Math.floor((timeDiff % msPerHour) / 60 / 1000);
  const passSecond = Math.floor((timeDiff % msPerMinute) / 1000);
  display_live_time.innerHTML = " " + passDay + " 天 " + passHour + " 小时 " + passMinute + " 分 " + passSecond + " 秒";
}
blog_live_time();
</script></div></footer><a class="hty-icon-button" id="goUp" aria-label="back-to-top" href="#"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-up-s-line"></use></svg><svg class="progress-circle-container" viewBox="0 0 100 100"><circle class="progress-circle" id="progressCircle" cx="50" cy="50" r="48" fill="none" stroke="#6200ee" stroke-width="2" stroke-linecap="round"></circle></svg></a></div><script defer src="/zengyusheng1314.github.io/js/utils.js"></script><script defer src="/zengyusheng1314.github.io/js/hexo-theme-yun.js"></script></body></html>